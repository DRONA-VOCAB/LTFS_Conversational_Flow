2026-02-03 12:48:32,954 - core.router - INFO - тЬЕ Registered handler for event type: init_session -> handle_init_session
2026-02-03 12:48:32,955 - core.router - INFO - тЬЕ Registered handler for event type: tts_finished -> handle_tts_finished
2026-02-03 12:48:32,955 - core.router - INFO - тЬЕ Registered handler for event type: tts_started -> handle_tts_started
2026-02-03 12:48:32,955 - core.router - INFO - тЬЕ Registered handler for event type: tts_request -> handle_tts_request
2026-02-03 12:48:32,955 - core.router - INFO - тЬЕ Registered handler for event type: ping -> handle_ping
2026-02-03 12:48:43,904 - core.router - INFO - тЬЕ Registered handler for event type: init_session -> handle_init_session
2026-02-03 12:48:43,904 - core.router - INFO - тЬЕ Registered handler for event type: tts_finished -> handle_tts_finished
2026-02-03 12:48:43,904 - core.router - INFO - тЬЕ Registered handler for event type: tts_started -> handle_tts_started
2026-02-03 12:48:43,904 - core.router - INFO - тЬЕ Registered handler for event type: tts_request -> handle_tts_request
2026-02-03 12:48:43,904 - core.router - INFO - тЬЕ Registered handler for event type: ping -> handle_ping
2026-02-03 12:51:00,892 - services.summary_service - INFO - ================================================================================
2026-02-03 12:51:00,893 - services.summary_service - INFO - ЁЯдЦ LLM CALL (transliterate_to_devanagari) - Input:
2026-02-03 12:51:00,893 - services.summary_service - INFO - Name: AAKASH  .
2026-02-03 12:51:00,893 - services.summary_service - INFO - --------------------------------------------------------------------------------
2026-02-03 12:51:01,676 - utils.session_data_storage - INFO - ЁЯТ╛ Saved DB data for session: session_ad748504_1770103260
2026-02-03 12:51:07,499 - llm.gemini_client - INFO - ЁЯдЦ [Qubrid API] Response status: 200
2026-02-03 12:51:07,500 - llm.gemini_client - INFO - тП▒я╕П [Qubrid API] Latency: 5822.73 ms
2026-02-03 12:51:07,502 - llm.gemini_client - INFO - ЁЯУб [Qubrid API] Streaming response completed, content length: 858 chars
2026-02-03 12:51:07,503 - llm.gemini_client - INFO - тЬЕ [Qubrid API] Response processed successfully - Latency: 5822.73ms, Tokens: N/A
2026-02-03 12:51:07,511 - core.websocket_handler - INFO - ЁЯФМ WebSocket connection attempt received
2026-02-03 12:51:07,512 - core.websocket_handler - INFO - тЬЕ WebSocket accepted
2026-02-03 12:51:07,512 - core.websocket_handler - INFO - ЁЯУЭ WebSocket ID assigned: 5011922416
2026-02-03 12:51:07,512 - core.websocket_handler - INFO - ЁЯУК Connection state initialized for 5011922416
2026-02-03 12:51:07,512 - core.websocket_handler - INFO - тЬЕ WebSocket connected: 5011922416
2026-02-03 12:51:07,512 - core.websocket_handler - INFO - ЁЯЪА Starting background tasks for 5011922416
2026-02-03 12:51:07,513 - core.websocket_handler - INFO - тЬЕ Background tasks started for 5011922416
2026-02-03 12:51:07,514 - core.websocket_handler - INFO - ЁЯУд Sent websocket_ready message to client
2026-02-03 12:51:07,618 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"init_session","session_id":"session_ad748504_1770103260","customer_name":"AAKASH  ."}...
2026-02-03 12:51:07,618 - core.router - INFO - ЁЯЪА Dispatching init_session event to handler: handle_init_session
2026-02-03 12:51:07,618 - core.websocket_handler - INFO - ЁЯУЮ Outbound call to: AAKASH  . (session: session_ad748504_1770103260)
2026-02-03 12:51:12,964 - llm.gemini_client - INFO - ЁЯдЦ [Qubrid API] Response status: 200
2026-02-03 12:51:12,964 - llm.gemini_client - INFO - тП▒я╕П [Qubrid API] Latency: 5345.57 ms
2026-02-03 12:51:12,968 - llm.gemini_client - INFO - ЁЯУб [Qubrid API] Streaming response completed, content length: 832 chars
2026-02-03 12:51:12,968 - llm.gemini_client - INFO - тЬЕ [Qubrid API] Response processed successfully - Latency: 5345.57ms, Tokens: N/A
2026-02-03 12:51:12,970 - core.websocket_handler - INFO - ЁЯУЛ Sending first question: рдирдорд╕реНрддреЗ, рдореИрдВ рдПрд▓ рдПрдВрдб рдЯреА рдлрд╛рдЗрдиреЗрдВрд╕ рдХреА рддрд░рдлрд╝ рд╕реЗ рдмрд╛рдд рдХрд░ рд░рд╣реА рд╣реВрдБ, рдХреНрдпрд╛ рдореЗрд░реА рдмрд╛рдд AAKASH  . рдЬреА рд╕реЗ рд╣реЛ рд░рд╣реА рд╣реИ?
2026-02-03 12:51:12,970 - core.router - INFO - тЬЕ Handler handle_init_session completed successfully
2026-02-03 12:51:12,971 - core.websocket_handler - INFO - ЁЯЧгя╕П TTS playing: рдирдорд╕реНрддреЗ, рдореИрдВ рдПрд▓ рдПрдВрдб рдЯреА рдлрд╛рдЗрдиреЗрдВрд╕ рдХреА рддрд░рдлрд╝ рд╕реЗ рдмрд╛рдд рдХрд░ рд░рд╣...
2026-02-03 12:51:12,971 - services.tts_service - INFO - ЁЯО╡ TTS: рдирдорд╕реНрддреЗ, рдореИрдВ рдПрд▓ рдПрдВрдб рдЯреА рдлрд╛рдЗрдиреЗрдВрд╕ рдХреА рддрд░рдлрд╝ рд╕реЗ рдмрд╛рдд рдХрд░ рд░рд╣...
2026-02-03 12:51:12,982 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"tts_started"}...
2026-02-03 12:51:12,982 - core.router - INFO - ЁЯЪА Dispatching tts_started event to handler: handle_tts_started
2026-02-03 12:51:12,982 - core.websocket_handler - INFO - ЁЯФЗ Mic disabled for 5011922416 (TTS playing)
2026-02-03 12:51:12,982 - core.router - INFO - тЬЕ Handler handle_tts_started completed successfully
2026-02-03 12:51:19,694 - services.tts_service - INFO - тЬЕ TTS complete: 56 chunks
2026-02-03 12:51:19,695 - core.websocket_handler - INFO - тЬЕ TTS complete: 56 chunks sent
2026-02-03 12:51:19,696 - core.websocket_handler - INFO - тП░ Reset last_user_input_time after TTS for 5011922416
2026-02-03 12:51:19,697 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"tts_finished"}...
2026-02-03 12:51:19,697 - core.router - INFO - ЁЯЪА Dispatching tts_finished event to handler: handle_tts_finished
2026-02-03 12:51:19,698 - core.websocket_handler - INFO - ЁЯОд Mic enabled for 5011922416
2026-02-03 12:51:19,698 - core.router - INFO - тЬЕ Handler handle_tts_finished completed successfully
2026-02-03 12:51:20,571 - services.vad_silero - INFO - ЁЯОд Voice detected! (prob: 1.00)
2026-02-03 12:51:25,929 - services.vad_silero - INFO - ЁЯФЪ Speech ended, sending 187392 bytes to ASR
2026-02-03 12:51:25,930 - core.websocket_handler - INFO - ЁЯФН ASR: Processing audio for 5011922416
2026-02-03 12:51:26,863 - core.websocket_handler - INFO - ЁЯУЭ ASR Transcript: 'рд╣рд╛ рдореИрдВ рдЖрдХрд╢ рдмреЛрд▓ рд░рд╣рд╛ рд╣реВрдВред'
2026-02-03 12:51:26,863 - core.websocket_handler - INFO - тП░ Updated last_user_input_time for 5011922416
2026-02-03 12:51:26,863 - core.websocket_handler - INFO - ЁЯУе Processing answer: 'рд╣рд╛ рдореИрдВ рдЖрдХрд╢ рдмреЛрд▓ рд░рд╣рд╛ рд╣реВрдВред' for phase=conversation, question=0
2026-02-03 12:51:26,864 - flow.flow_manager - INFO - ЁЯФД Processing conversational response: 'рд╣рд╛ рдореИрдВ рдЖрдХрд╢ рдмреЛрд▓ рд░рд╣рд╛ рд╣реВрдВред'
2026-02-03 12:51:26,864 - services.conversational_flow - INFO - ===== New Conversational Turn =====
2026-02-03 12:51:26,864 - services.conversational_flow - INFO - Customer Name: AAKASH  .
2026-02-03 12:51:26,864 - services.conversational_flow - INFO - User Input: рд╣рд╛ рдореИрдВ рдЖрдХрд╢ рдмреЛрд▓ рд░рд╣рд╛ рд╣реВрдВред
2026-02-03 12:51:26,864 - services.conversational_flow - INFO - Session (before): {'session_id': 'session_ad748504_1770103260', 'customer_name': 'AAKASH  .', 'customer_name_english': 'AAKASH  .', 'identity_confirmed': None, 'loan_taken': None, 'last_month_payment': None, 'payee': None, 'payment_date': None, 'payment_mode': None, 'payment_reason': None, 'payment_amount': None, 'conversation_started': True, 'last_bot_response': None, 'identify_confirmation': None, 'availability': None, 'user_contact': None, 'last_month_emi_payment': None, 'payee_name': None, 'payee_contact': None, 'pay_date': None, 'mode_of_payment': None, 'field_executive_name': None, 'field_executive_contact': None, 'reason': None, 'amount': None, 'current_question': 0, 'retry_count': 0, 'call_should_end': False, 'call_end_reason': None, 'phase': 'conversation', 'generated_summary': None, 'summary_confirmed': False, 'product_type': 'рдкрд░реНрд╕рдирд▓ рд▓реЛрди'}
2026-02-03 12:51:26,864 - services.conversational_flow - INFO - Conversation Stage: identity_confirmation
2026-02-03 12:51:26,864 - services.conversational_flow - INFO - Missing Information: ['identity confirmation', 'loan confirmation', 'last month payment confirmation', 'who made payment', 'payment date', 'payment method', 'payment reason', 'payment amount']
2026-02-03 12:51:36,954 - llm.gemini_client - INFO - ЁЯдЦ [Qubrid API] Response status: 200
2026-02-03 12:51:36,955 - llm.gemini_client - INFO - тП▒я╕П [Qubrid API] Latency: 10089.89 ms
2026-02-03 12:51:36,960 - llm.gemini_client - INFO - ЁЯУб [Qubrid API] Streaming response completed, content length: 2190 chars
2026-02-03 12:51:36,961 - llm.gemini_client - INFO - тЬЕ [Qubrid API] Response processed successfully - Latency: 10089.89ms, Tokens: N/A
2026-02-03 12:51:36,962 - services.conversational_flow - INFO - LLM Raw Response: {'bot_response': 'рдЬреА, рдЖрдк рдЖрдХрд╢ рд╣реИрдВ? рдХреНрдпрд╛ рдЖрдкрдХреЗ рдкрд╛рд╕ рдПрд▓ рдПрдВрдб рдЯреА рдлрд╛рдЗрдиреЗрдВрд╕ рд╕реЗ рд▓реЛрди рд╣реИ?', 'extracted_data': {'identity_confirmed': 'YES', 'speaker_name': 'рдЖрдХрд╢', 'speaker_relation': None, 'loan_taken': None, 'last_month_payment': None, 'payee': None, 'payee_name': None, 'payee_contact': None, 'payment_date': None, 'payment_mode': None, 'field_executive_name': None, 'field_executive_contact': None, 'payment_reason': None, 'payment_amount': None}, 'next_action': 'continue', 'provide_summary': False, 'missing_info': ['loan confirmation', 'last month payment confirmation', 'who made payment', 'payment date', 'payment method', 'payment reason', 'payment amount'], 'call_end_reason': 'null', 'conversation_notes': 'рдЧреНрд░рд╛рд╣рдХ рдиреЗ рдЕрдкрдирд╛ рдирд╛рдо рдкрд╣рдЪрд╛рдирд╛рдВрдХрд┐рдд рдХрд░ рджрд┐рдпрд╛ рд╣реИ, рдЕрдм рд▓реЛрди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкреВрдЫрд╛ рдЬрд╛рдПрдЧрд╛', '_latency_ms': 10089.89, '_model': 'nvidia/Orchestrator-8B'}
2026-02-03 12:51:36,962 - services.conversational_flow - INFO - Extracted Data from LLM: {'identity_confirmed': 'YES', 'speaker_name': 'рдЖрдХрд╢', 'speaker_relation': None, 'loan_taken': None, 'last_month_payment': None, 'payee': None, 'payee_name': None, 'payee_contact': None, 'payment_date': None, 'payment_mode': None, 'field_executive_name': None, 'field_executive_contact': None, 'payment_reason': None, 'payment_amount': None}
2026-02-03 12:51:36,963 - services.conversational_flow - INFO - Next Action from LLM: continue
2026-02-03 12:51:36,963 - services.conversational_flow - INFO - Call End Reason from LLM: null
2026-02-03 12:51:36,963 - services.conversational_flow - INFO - Session (after): {'session_id': 'session_ad748504_1770103260', 'customer_name': 'AAKASH  .', 'customer_name_english': 'AAKASH  .', 'identity_confirmed': 'YES', 'loan_taken': None, 'last_month_payment': None, 'payee': None, 'payment_date': None, 'payment_mode': None, 'payment_reason': None, 'payment_amount': None, 'conversation_started': True, 'last_bot_response': None, 'identify_confirmation': None, 'availability': None, 'user_contact': None, 'last_month_emi_payment': None, 'payee_name': None, 'payee_contact': None, 'pay_date': None, 'mode_of_payment': None, 'field_executive_name': None, 'field_executive_contact': None, 'reason': None, 'amount': None, 'current_question': 0, 'retry_count': 0, 'call_should_end': False, 'call_end_reason': None, 'phase': 'conversation', 'generated_summary': None, 'summary_confirmed': False, 'product_type': 'рдкрд░реНрд╕рдирд▓ рд▓реЛрди', 'speaker_name': 'рдЖрдХрд╢'}
2026-02-03 12:51:36,963 - core.websocket_handler - INFO - ЁЯУд Answer result: CONTINUE_CONVERSATION
2026-02-03 12:51:36,963 - core.websocket_handler - INFO - ЁЯТм Continuing conversation .
2026-02-03 12:51:36,964 - core.websocket_handler - INFO - ЁЯЧгя╕П TTS playing: рдЬреА, рдЖрдк рдЖрдХрд╢ рд╣реИрдВ? рдХреНрдпрд╛ рдЖрдкрдХреЗ рдкрд╛рд╕ рдПрд▓ рдПрдВрдб рдЯреА рдлрд╛рдЗрдиреЗрдВрд╕ рд╕реЗ...
2026-02-03 12:51:36,965 - services.tts_service - INFO - ЁЯО╡ TTS: рдЬреА, рдЖрдк рдЖрдХрд╢ рд╣реИрдВ? рдХреНрдпрд╛ рдЖрдкрдХреЗ рдкрд╛рд╕ рдПрд▓ рдПрдВрдб рдЯреА рдлрд╛рдЗрдиреЗрдВрд╕ рд╕реЗ...
2026-02-03 12:51:36,984 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"tts_started"}...
2026-02-03 12:51:36,984 - core.router - INFO - ЁЯЪА Dispatching tts_started event to handler: handle_tts_started
2026-02-03 12:51:36,984 - core.websocket_handler - INFO - ЁЯФЗ Mic disabled for 5011922416 (TTS playing)
2026-02-03 12:51:36,984 - core.router - INFO - тЬЕ Handler handle_tts_started completed successfully
2026-02-03 12:51:41,199 - services.tts_service - INFO - тЬЕ TTS complete: 31 chunks
2026-02-03 12:51:41,200 - core.websocket_handler - INFO - тЬЕ TTS complete: 31 chunks sent
2026-02-03 12:51:41,201 - core.websocket_handler - INFO - тП░ Reset last_user_input_time after TTS for 5011922416
2026-02-03 12:51:41,202 - services.google_sheet_logger - WARNING - Google Sheet creds not found at /Users/snehakiranmanded/LTFS_Conversational_Flow/backend/google_sheet_creds.json - sheet logging disabled
2026-02-03 12:51:41,203 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"tts_finished"}...
2026-02-03 12:51:41,203 - core.router - INFO - ЁЯЪА Dispatching tts_finished event to handler: handle_tts_finished
2026-02-03 12:51:41,204 - core.websocket_handler - INFO - ЁЯОд Mic enabled for 5011922416
2026-02-03 12:51:41,204 - core.router - INFO - тЬЕ Handler handle_tts_finished completed successfully
2026-02-03 12:51:41,580 - services.vad_silero - INFO - ЁЯОд Voice detected! (prob: 0.90)
2026-02-03 12:51:45,539 - services.vad_silero - INFO - ЁЯФЪ Speech ended, sending 139264 bytes to ASR
2026-02-03 12:51:45,540 - core.websocket_handler - INFO - ЁЯФН ASR: Processing audio for 5011922416
2026-02-03 12:51:46,524 - core.websocket_handler - INFO - ЁЯУЭ ASR Transcript: 'рд╣рд╛рдБ рдореИрдВрдиреЗ рдПрдХ рд▓реЛрди рд▓рд┐рдпрд╛ рд╣реИред'
2026-02-03 12:51:46,524 - core.websocket_handler - INFO - тП░ Updated last_user_input_time for 5011922416
2026-02-03 12:51:46,524 - core.websocket_handler - INFO - ЁЯУе Processing answer: 'рд╣рд╛рдБ рдореИрдВрдиреЗ рдПрдХ рд▓реЛрди рд▓рд┐рдпрд╛ рд╣реИред' for phase=conversation, question=0
2026-02-03 12:51:46,525 - flow.flow_manager - INFO - ЁЯФД Processing conversational response: 'рд╣рд╛рдБ рдореИрдВрдиреЗ рдПрдХ рд▓реЛрди рд▓рд┐рдпрд╛ рд╣реИред'
2026-02-03 12:51:46,525 - services.conversational_flow - INFO - ===== New Conversational Turn =====
2026-02-03 12:51:46,525 - services.conversational_flow - INFO - Customer Name: AAKASH  .
2026-02-03 12:51:46,525 - services.conversational_flow - INFO - User Input: рд╣рд╛рдБ рдореИрдВрдиреЗ рдПрдХ рд▓реЛрди рд▓рд┐рдпрд╛ рд╣реИред
2026-02-03 12:51:46,525 - services.conversational_flow - INFO - Session (before): {'session_id': 'session_ad748504_1770103260', 'customer_name': 'AAKASH  .', 'customer_name_english': 'AAKASH  .', 'identity_confirmed': 'YES', 'loan_taken': None, 'last_month_payment': None, 'payee': None, 'payment_date': None, 'payment_mode': None, 'payment_reason': None, 'payment_amount': None, 'conversation_started': True, 'last_bot_response': 'рдЬреА, рдЖрдк рдЖрдХрд╢ рд╣реИрдВ? рдХреНрдпрд╛ рдЖрдкрдХреЗ рдкрд╛рд╕ рдПрд▓ рдПрдВрдб рдЯреА рдлрд╛рдЗрдиреЗрдВрд╕ рд╕реЗ рд▓реЛрди рд╣реИ?', 'identify_confirmation': None, 'availability': None, 'user_contact': None, 'last_month_emi_payment': None, 'payee_name': None, 'payee_contact': None, 'pay_date': None, 'mode_of_payment': None, 'field_executive_name': None, 'field_executive_contact': None, 'reason': None, 'amount': None, 'current_question': 0, 'retry_count': 0, 'call_should_end': False, 'call_end_reason': None, 'phase': 'conversation', 'generated_summary': None, 'summary_confirmed': False, 'product_type': 'рдкрд░реНрд╕рдирд▓ рд▓реЛрди', 'speaker_name': 'рдЖрдХрд╢', 'last_conversation_notes': 'рдЧреНрд░рд╛рд╣рдХ рдиреЗ рдЕрдкрдирд╛ рдирд╛рдо рдкрд╣рдЪрд╛рдирд╛рдВрдХрд┐рдд рдХрд░ рджрд┐рдпрд╛ рд╣реИ, рдЕрдм рд▓реЛрди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкреВрдЫрд╛ рдЬрд╛рдПрдЧрд╛'}
2026-02-03 12:51:46,525 - services.conversational_flow - INFO - Conversation Stage: loan_confirmation
2026-02-03 12:51:46,526 - services.conversational_flow - INFO - Missing Information: ['loan confirmation', 'last month payment confirmation', 'who made payment', 'payment date', 'payment method', 'payment reason', 'payment amount']
2026-02-03 12:51:55,951 - llm.gemini_client - INFO - ЁЯдЦ [Qubrid API] Response status: 200
2026-02-03 12:51:55,951 - llm.gemini_client - INFO - тП▒я╕П [Qubrid API] Latency: 9424.71 ms
2026-02-03 12:51:55,957 - llm.gemini_client - INFO - ЁЯУб [Qubrid API] Streaming response completed, content length: 2023 chars
2026-02-03 12:51:55,957 - llm.gemini_client - INFO - тЬЕ [Qubrid API] Response processed successfully - Latency: 9424.71ms, Tokens: N/A
2026-02-03 12:51:55,959 - services.conversational_flow - INFO - LLM Raw Response: {'bot_response': 'рдЕрдЪреНрдЫрд╛, рдЖрдкрдХреЗ рд▓реЛрди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрддрд╛рдЗрдПред рдкрд┐рдЫрд▓реЗ рдорд╣реАрдиреЗ рднреБрдЧрддрд╛рди рдХрд┐рдпрд╛ рдЧрдпрд╛ рдХрд┐?', 'extracted_data': {'identity_confirmed': 'YES', 'loan_taken': 'YES', 'last_month_payment': None, 'payee': None, 'payment_date': None, 'payment_mode': None, 'payment_reason': None, 'payment_amount': None}, 'next_action': 'continue', 'provide_summary': False, 'missing_info': ['last month payment confirmation', 'who made payment', 'payment date', 'payment method', 'payment reason', 'payment amount'], 'call_end_reason': 'null', 'conversation_notes': 'рдЧреНрд░рд╛рд╣рдХ рдиреЗ рд▓реЛрди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкреБрд╖реНрдЯрд┐ рдХреА, рдЕрдм рдкрд┐рдЫрд▓реЗ рдорд╣реАрдиреЗ рднреБрдЧрддрд╛рди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкреВрдЫрд╛ рдЬрд╛рдПрдЧрд╛', '_latency_ms': 9424.71, '_model': 'nvidia/Orchestrator-8B'}
2026-02-03 12:51:55,959 - services.conversational_flow - INFO - Extracted Data from LLM: {'identity_confirmed': 'YES', 'loan_taken': 'YES', 'last_month_payment': None, 'payee': None, 'payment_date': None, 'payment_mode': None, 'payment_reason': None, 'payment_amount': None}
2026-02-03 12:51:55,959 - services.conversational_flow - INFO - Next Action from LLM: continue
2026-02-03 12:51:55,959 - services.conversational_flow - INFO - Call End Reason from LLM: null
2026-02-03 12:51:55,959 - services.conversational_flow - INFO - Session (after): {'session_id': 'session_ad748504_1770103260', 'customer_name': 'AAKASH  .', 'customer_name_english': 'AAKASH  .', 'identity_confirmed': 'YES', 'loan_taken': 'YES', 'last_month_payment': None, 'payee': None, 'payment_date': None, 'payment_mode': None, 'payment_reason': None, 'payment_amount': None, 'conversation_started': True, 'last_bot_response': 'рдЬреА, рдЖрдк рдЖрдХрд╢ рд╣реИрдВ? рдХреНрдпрд╛ рдЖрдкрдХреЗ рдкрд╛рд╕ рдПрд▓ рдПрдВрдб рдЯреА рдлрд╛рдЗрдиреЗрдВрд╕ рд╕реЗ рд▓реЛрди рд╣реИ?', 'identify_confirmation': None, 'availability': None, 'user_contact': None, 'last_month_emi_payment': None, 'payee_name': None, 'payee_contact': None, 'pay_date': None, 'mode_of_payment': None, 'field_executive_name': None, 'field_executive_contact': None, 'reason': None, 'amount': None, 'current_question': 0, 'retry_count': 0, 'call_should_end': False, 'call_end_reason': None, 'phase': 'conversation', 'generated_summary': None, 'summary_confirmed': False, 'product_type': 'рдкрд░реНрд╕рдирд▓ рд▓реЛрди', 'speaker_name': 'рдЖрдХрд╢', 'last_conversation_notes': 'рдЧреНрд░рд╛рд╣рдХ рдиреЗ рдЕрдкрдирд╛ рдирд╛рдо рдкрд╣рдЪрд╛рдирд╛рдВрдХрд┐рдд рдХрд░ рджрд┐рдпрд╛ рд╣реИ, рдЕрдм рд▓реЛрди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкреВрдЫрд╛ рдЬрд╛рдПрдЧрд╛'}
2026-02-03 12:51:55,959 - core.websocket_handler - INFO - ЁЯУд Answer result: CONTINUE_CONVERSATION
2026-02-03 12:51:55,959 - core.websocket_handler - INFO - ЁЯТм Continuing conversation .
2026-02-03 12:51:55,961 - core.websocket_handler - INFO - ЁЯЧгя╕П TTS playing: рдЕрдЪреНрдЫрд╛, рдЖрдкрдХреЗ рд▓реЛрди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрддрд╛рдЗрдПред рдкрд┐рдЫрд▓реЗ рдорд╣реАрдиреЗ рднреБрдЧ...
2026-02-03 12:51:55,961 - services.tts_service - INFO - ЁЯО╡ TTS: рдЕрдЪреНрдЫрд╛, рдЖрдкрдХреЗ рд▓реЛрди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрддрд╛рдЗрдПред рдкрд┐рдЫрд▓реЗ рдорд╣реАрдиреЗ рднреБрдЧ...
2026-02-03 12:51:55,978 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"tts_started"}...
2026-02-03 12:51:55,978 - core.router - INFO - ЁЯЪА Dispatching tts_started event to handler: handle_tts_started
2026-02-03 12:51:55,979 - core.websocket_handler - INFO - ЁЯФЗ Mic disabled for 5011922416 (TTS playing)
2026-02-03 12:51:55,979 - core.router - INFO - тЬЕ Handler handle_tts_started completed successfully
2026-02-03 12:52:00,585 - services.tts_service - INFO - тЬЕ TTS complete: 40 chunks
2026-02-03 12:52:00,586 - core.websocket_handler - INFO - тЬЕ TTS complete: 40 chunks sent
2026-02-03 12:52:00,586 - core.websocket_handler - INFO - тП░ Reset last_user_input_time after TTS for 5011922416
2026-02-03 12:52:00,587 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"tts_finished"}...
2026-02-03 12:52:00,588 - core.router - INFO - ЁЯЪА Dispatching tts_finished event to handler: handle_tts_finished
2026-02-03 12:52:00,588 - core.websocket_handler - INFO - ЁЯОд Mic enabled for 5011922416
2026-02-03 12:52:00,588 - core.router - INFO - тЬЕ Handler handle_tts_finished completed successfully
2026-02-03 12:52:02,764 - services.vad_silero - INFO - ЁЯОд Voice detected! (prob: 1.00)
2026-02-03 12:52:04,779 - services.vad_silero - INFO - ЁЯФЪ Speech ended, sending 79872 bytes to ASR
2026-02-03 12:52:04,780 - core.websocket_handler - INFO - ЁЯФН ASR: Processing audio for 5011922416
2026-02-03 12:52:05,673 - core.websocket_handler - INFO - ЁЯУЭ ASR Transcript: 'рд╣рд╛рдБ рдореИрдВрдиреЗ рдХрд┐рдпрд╛ рдерд╛ред'
2026-02-03 12:52:05,673 - core.websocket_handler - INFO - тП░ Updated last_user_input_time for 5011922416
2026-02-03 12:52:05,673 - core.websocket_handler - INFO - ЁЯУе Processing answer: 'рд╣рд╛рдБ рдореИрдВрдиреЗ рдХрд┐рдпрд╛ рдерд╛ред' for phase=conversation, question=0
2026-02-03 12:52:05,673 - flow.flow_manager - INFO - ЁЯФД Processing conversational response: 'рд╣рд╛рдБ рдореИрдВрдиреЗ рдХрд┐рдпрд╛ рдерд╛ред'
2026-02-03 12:52:05,674 - services.conversational_flow - INFO - ===== New Conversational Turn =====
2026-02-03 12:52:05,674 - services.conversational_flow - INFO - Customer Name: AAKASH  .
2026-02-03 12:52:05,674 - services.conversational_flow - INFO - User Input: рд╣рд╛рдБ рдореИрдВрдиреЗ рдХрд┐рдпрд╛ рдерд╛ред
2026-02-03 12:52:05,674 - services.conversational_flow - INFO - Session (before): {'session_id': 'session_ad748504_1770103260', 'customer_name': 'AAKASH  .', 'customer_name_english': 'AAKASH  .', 'identity_confirmed': 'YES', 'loan_taken': 'YES', 'last_month_payment': None, 'payee': None, 'payment_date': None, 'payment_mode': None, 'payment_reason': None, 'payment_amount': None, 'conversation_started': True, 'last_bot_response': 'рдЕрдЪреНрдЫрд╛, рдЖрдкрдХреЗ рд▓реЛрди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрддрд╛рдЗрдПред рдкрд┐рдЫрд▓реЗ рдорд╣реАрдиреЗ рднреБрдЧрддрд╛рди рдХрд┐рдпрд╛ рдЧрдпрд╛ рдХрд┐?', 'identify_confirmation': None, 'availability': None, 'user_contact': None, 'last_month_emi_payment': None, 'payee_name': None, 'payee_contact': None, 'pay_date': None, 'mode_of_payment': None, 'field_executive_name': None, 'field_executive_contact': None, 'reason': None, 'amount': None, 'current_question': 0, 'retry_count': 0, 'call_should_end': False, 'call_end_reason': None, 'phase': 'conversation', 'generated_summary': None, 'summary_confirmed': False, 'product_type': 'рдкрд░реНрд╕рдирд▓ рд▓реЛрди', 'speaker_name': 'рдЖрдХрд╢', 'last_conversation_notes': 'рдЧреНрд░рд╛рд╣рдХ рдиреЗ рд▓реЛрди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкреБрд╖реНрдЯрд┐ рдХреА, рдЕрдм рдкрд┐рдЫрд▓реЗ рдорд╣реАрдиреЗ рднреБрдЧрддрд╛рди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкреВрдЫрд╛ рдЬрд╛рдПрдЧрд╛'}
2026-02-03 12:52:05,674 - services.conversational_flow - INFO - Conversation Stage: payment_confirmation
2026-02-03 12:52:05,674 - services.conversational_flow - INFO - Missing Information: ['last month payment confirmation', 'who made payment', 'payment date', 'payment method', 'payment reason', 'payment amount']
2026-02-03 12:52:15,390 - llm.gemini_client - INFO - ЁЯдЦ [Qubrid API] Response status: 200
2026-02-03 12:52:15,390 - llm.gemini_client - INFO - тП▒я╕П [Qubrid API] Latency: 9715.54 ms
2026-02-03 12:52:15,395 - llm.gemini_client - INFO - ЁЯУб [Qubrid API] Streaming response completed, content length: 2457 chars
2026-02-03 12:52:15,395 - llm.gemini_client - INFO - тЬЕ [Qubrid API] Response processed successfully - Latency: 9715.54ms, Tokens: N/A
2026-02-03 12:52:15,397 - services.conversational_flow - INFO - LLM Raw Response: {'bot_response': 'рдареАрдХ рд╣реИ, рднреБрдЧрддрд╛рди рдХрд┐рд╕ рд╡реНрдпрдХреНрддрд┐ рджреНрд╡рд╛рд░рд╛ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛?', 'extracted_data': {'identity_confirmed': 'YES', 'loan_taken': 'YES', 'last_month_payment': 'YES'}, 'next_action': 'continue', 'provide_summary': False, 'missing_info': ['who made payment', 'payment date', 'payment method', 'payment reason', 'payment amount'], '_latency_ms': 9715.54, '_model': 'nvidia/Orchestrator-8B'}
2026-02-03 12:52:15,397 - services.conversational_flow - INFO - Extracted Data from LLM: {'identity_confirmed': 'YES', 'loan_taken': 'YES', 'last_month_payment': 'YES'}
2026-02-03 12:52:15,397 - services.conversational_flow - INFO - Next Action from LLM: continue
2026-02-03 12:52:15,397 - services.conversational_flow - INFO - Call End Reason from LLM: None
2026-02-03 12:52:15,398 - services.conversational_flow - INFO - Session (after): {'session_id': 'session_ad748504_1770103260', 'customer_name': 'AAKASH  .', 'customer_name_english': 'AAKASH  .', 'identity_confirmed': 'YES', 'loan_taken': 'YES', 'last_month_payment': 'YES', 'payee': None, 'payment_date': None, 'payment_mode': None, 'payment_reason': None, 'payment_amount': None, 'conversation_started': True, 'last_bot_response': 'рдЕрдЪреНрдЫрд╛, рдЖрдкрдХреЗ рд▓реЛрди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрддрд╛рдЗрдПред рдкрд┐рдЫрд▓реЗ рдорд╣реАрдиреЗ рднреБрдЧрддрд╛рди рдХрд┐рдпрд╛ рдЧрдпрд╛ рдХрд┐?', 'identify_confirmation': None, 'availability': None, 'user_contact': None, 'last_month_emi_payment': None, 'payee_name': None, 'payee_contact': None, 'pay_date': None, 'mode_of_payment': None, 'field_executive_name': None, 'field_executive_contact': None, 'reason': None, 'amount': None, 'current_question': 0, 'retry_count': 0, 'call_should_end': False, 'call_end_reason': None, 'phase': 'conversation', 'generated_summary': None, 'summary_confirmed': False, 'product_type': 'рдкрд░реНрд╕рдирд▓ рд▓реЛрди', 'speaker_name': 'рдЖрдХрд╢', 'last_conversation_notes': 'рдЧреНрд░рд╛рд╣рдХ рдиреЗ рд▓реЛрди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкреБрд╖реНрдЯрд┐ рдХреА, рдЕрдм рдкрд┐рдЫрд▓реЗ рдорд╣реАрдиреЗ рднреБрдЧрддрд╛рди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкреВрдЫрд╛ рдЬрд╛рдПрдЧрд╛'}
2026-02-03 12:52:15,398 - core.websocket_handler - INFO - ЁЯУд Answer result: CONTINUE_CONVERSATION
2026-02-03 12:52:15,398 - core.websocket_handler - INFO - ЁЯТм Continuing conversation .
2026-02-03 12:52:15,399 - core.websocket_handler - INFO - ЁЯЧгя╕П TTS playing: рдареАрдХ рд╣реИ, рднреБрдЧрддрд╛рди рдХрд┐рд╕ рд╡реНрдпрдХреНрддрд┐ рджреНрд╡рд╛рд░рд╛ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛?...
2026-02-03 12:52:15,400 - services.tts_service - INFO - ЁЯО╡ TTS: рдареАрдХ рд╣реИ, рднреБрдЧрддрд╛рди рдХрд┐рд╕ рд╡реНрдпрдХреНрддрд┐ рджреНрд╡рд╛рд░рд╛ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛?...
2026-02-03 12:52:15,415 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"tts_started"}...
2026-02-03 12:52:15,415 - core.router - INFO - ЁЯЪА Dispatching tts_started event to handler: handle_tts_started
2026-02-03 12:52:15,415 - core.websocket_handler - INFO - ЁЯФЗ Mic disabled for 5011922416 (TTS playing)
2026-02-03 12:52:15,415 - core.router - INFO - тЬЕ Handler handle_tts_started completed successfully
2026-02-03 12:52:19,292 - services.tts_service - INFO - тЬЕ TTS complete: 32 chunks
2026-02-03 12:52:19,293 - core.websocket_handler - INFO - тЬЕ TTS complete: 32 chunks sent
2026-02-03 12:52:19,293 - core.websocket_handler - INFO - тП░ Reset last_user_input_time after TTS for 5011922416
2026-02-03 12:52:19,294 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"tts_finished"}...
2026-02-03 12:52:19,294 - core.router - INFO - ЁЯЪА Dispatching tts_finished event to handler: handle_tts_finished
2026-02-03 12:52:19,294 - core.websocket_handler - INFO - ЁЯОд Mic enabled for 5011922416
2026-02-03 12:52:19,294 - core.router - INFO - тЬЕ Handler handle_tts_finished completed successfully
2026-02-03 12:52:19,901 - services.vad_silero - INFO - ЁЯОд Voice detected! (prob: 1.00)
2026-02-03 12:52:21,819 - services.vad_silero - INFO - ЁЯФЪ Speech ended, sending 76800 bytes to ASR
2026-02-03 12:52:21,820 - core.websocket_handler - INFO - ЁЯФН ASR: Processing audio for 5011922416
2026-02-03 12:52:22,664 - core.websocket_handler - INFO - ЁЯУЭ ASR Transcript: 'рдореИрдВрдиреЗ рдЦреБрдж рдХрд┐рдпрд╛ рдерд╛ред'
2026-02-03 12:52:22,664 - core.websocket_handler - INFO - тП░ Updated last_user_input_time for 5011922416
2026-02-03 12:52:22,664 - core.websocket_handler - INFO - ЁЯУе Processing answer: 'рдореИрдВрдиреЗ рдЦреБрдж рдХрд┐рдпрд╛ рдерд╛ред' for phase=conversation, question=0
2026-02-03 12:52:22,665 - flow.flow_manager - INFO - ЁЯФД Processing conversational response: 'рдореИрдВрдиреЗ рдЦреБрдж рдХрд┐рдпрд╛ рдерд╛ред'
2026-02-03 12:52:22,665 - services.conversational_flow - INFO - ===== New Conversational Turn =====
2026-02-03 12:52:22,665 - services.conversational_flow - INFO - Customer Name: AAKASH  .
2026-02-03 12:52:22,665 - services.conversational_flow - INFO - User Input: рдореИрдВрдиреЗ рдЦреБрдж рдХрд┐рдпрд╛ рдерд╛ред
2026-02-03 12:52:22,665 - services.conversational_flow - INFO - Session (before): {'session_id': 'session_ad748504_1770103260', 'customer_name': 'AAKASH  .', 'customer_name_english': 'AAKASH  .', 'identity_confirmed': 'YES', 'loan_taken': 'YES', 'last_month_payment': 'YES', 'payee': None, 'payment_date': None, 'payment_mode': None, 'payment_reason': None, 'payment_amount': None, 'conversation_started': True, 'last_bot_response': 'рдареАрдХ рд╣реИ, рднреБрдЧрддрд╛рди рдХрд┐рд╕ рд╡реНрдпрдХреНрддрд┐ рджреНрд╡рд╛рд░рд╛ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛?', 'identify_confirmation': None, 'availability': None, 'user_contact': None, 'last_month_emi_payment': None, 'payee_name': None, 'payee_contact': None, 'pay_date': None, 'mode_of_payment': None, 'field_executive_name': None, 'field_executive_contact': None, 'reason': None, 'amount': None, 'current_question': 0, 'retry_count': 0, 'call_should_end': False, 'call_end_reason': None, 'phase': 'conversation', 'generated_summary': None, 'summary_confirmed': False, 'product_type': 'рдкрд░реНрд╕рдирд▓ рд▓реЛрди', 'speaker_name': 'рдЖрдХрд╢', 'last_conversation_notes': ''}
2026-02-03 12:52:22,665 - services.conversational_flow - INFO - Conversation Stage: payee_identification
2026-02-03 12:52:22,665 - services.conversational_flow - INFO - Missing Information: ['who made payment', 'payment date', 'payment method', 'payment reason', 'payment amount']
2026-02-03 12:52:33,054 - llm.gemini_client - INFO - ЁЯдЦ [Qubrid API] Response status: 200
2026-02-03 12:52:33,055 - llm.gemini_client - INFO - тП▒я╕П [Qubrid API] Latency: 10388.60 ms
2026-02-03 12:52:33,061 - llm.gemini_client - INFO - ЁЯУб [Qubrid API] Streaming response completed, content length: 2259 chars
2026-02-03 12:52:33,061 - llm.gemini_client - INFO - тЬЕ [Qubrid API] Response processed successfully - Latency: 10388.60ms, Tokens: N/A
2026-02-03 12:52:33,063 - services.conversational_flow - INFO - LLM Raw Response: {'bot_response': 'рд╕рдордЭ рдЧрдИ рд╣реВрдБ, рдХрд┐рд╕ рддрд╛рд░реАрдЦ рдХреЛ рднреБрдЧрддрд╛рди рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛?', 'extracted_data': {'identity_confirmed': 'YES', 'speaker_name': 'AAKASH', 'speaker_relation': 'self', 'loan_taken': 'YES', 'last_month_payment': 'YES', 'payee': 'self', 'payee_name': None, 'payee_contact': None, 'payment_date': None, 'payment_mode': None, 'field_executive_name': None, 'field_executive_contact': None, 'payment_reason': None, 'payment_amount': None}, 'next_action': 'continue', 'provide_summary': False, 'missing_info': ['payment date', 'payment method', 'payment reason', 'payment amount'], 'call_end_reason': 'null', 'conversation_notes': 'рдЧреНрд░рд╛рд╣рдХ рдиреЗ рднреБрдЧрддрд╛рди рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рд╡реНрдпрдХреНрддрд┐ рдХреА рдкрд╣рдЪрд╛рди рд╕реНрд╡рдпрдВ рдХреЗ рд░реВрдк рдореЗрдВ рджреА рд╣реИ, рдЕрдм рднреБрдЧрддрд╛рди рддрд╛рд░реАрдЦ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкреВрдЫрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИ', '_latency_ms': 10388.6, '_model': 'nvidia/Orchestrator-8B'}
2026-02-03 12:52:33,063 - services.conversational_flow - INFO - Extracted Data from LLM: {'identity_confirmed': 'YES', 'speaker_name': 'AAKASH', 'speaker_relation': 'self', 'loan_taken': 'YES', 'last_month_payment': 'YES', 'payee': 'self', 'payee_name': None, 'payee_contact': None, 'payment_date': None, 'payment_mode': None, 'field_executive_name': None, 'field_executive_contact': None, 'payment_reason': None, 'payment_amount': None}
2026-02-03 12:52:33,063 - services.conversational_flow - INFO - Next Action from LLM: continue
2026-02-03 12:52:33,063 - services.conversational_flow - INFO - Call End Reason from LLM: null
2026-02-03 12:52:33,063 - services.conversational_flow - INFO - Session (after): {'session_id': 'session_ad748504_1770103260', 'customer_name': 'AAKASH  .', 'customer_name_english': 'AAKASH  .', 'identity_confirmed': 'YES', 'loan_taken': 'YES', 'last_month_payment': 'YES', 'payee': 'self', 'payment_date': None, 'payment_mode': None, 'payment_reason': None, 'payment_amount': None, 'conversation_started': True, 'last_bot_response': 'рдареАрдХ рд╣реИ, рднреБрдЧрддрд╛рди рдХрд┐рд╕ рд╡реНрдпрдХреНрддрд┐ рджреНрд╡рд╛рд░рд╛ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛?', 'identify_confirmation': None, 'availability': None, 'user_contact': None, 'last_month_emi_payment': None, 'payee_name': None, 'payee_contact': None, 'pay_date': None, 'mode_of_payment': None, 'field_executive_name': None, 'field_executive_contact': None, 'reason': None, 'amount': None, 'current_question': 0, 'retry_count': 0, 'call_should_end': False, 'call_end_reason': None, 'phase': 'conversation', 'generated_summary': None, 'summary_confirmed': False, 'product_type': 'рдкрд░реНрд╕рдирд▓ рд▓реЛрди', 'speaker_name': 'AAKASH', 'last_conversation_notes': '', 'speaker_relation': 'self'}
2026-02-03 12:52:33,063 - core.websocket_handler - INFO - ЁЯУд Answer result: CONTINUE_CONVERSATION
2026-02-03 12:52:33,063 - core.websocket_handler - INFO - ЁЯТм Continuing conversation .
2026-02-03 12:52:33,065 - core.websocket_handler - INFO - ЁЯЧгя╕П TTS playing: рд╕рдордЭ рдЧрдИ рд╣реВрдБ, рдХрд┐рд╕ рддрд╛рд░реАрдЦ рдХреЛ рднреБрдЧрддрд╛рди рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛?...
2026-02-03 12:52:33,065 - services.tts_service - INFO - ЁЯО╡ TTS: рд╕рдордЭ рдЧрдИ рд╣реВрдБ, рдХрд┐рд╕ рддрд╛рд░реАрдЦ рдХреЛ рднреБрдЧрддрд╛рди рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛?...
2026-02-03 12:52:33,079 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"tts_started"}...
2026-02-03 12:52:33,079 - core.router - INFO - ЁЯЪА Dispatching tts_started event to handler: handle_tts_started
2026-02-03 12:52:33,079 - core.websocket_handler - INFO - ЁЯФЗ Mic disabled for 5011922416 (TTS playing)
2026-02-03 12:52:33,079 - core.router - INFO - тЬЕ Handler handle_tts_started completed successfully
2026-02-03 12:52:36,394 - services.tts_service - INFO - тЬЕ TTS complete: 33 chunks
2026-02-03 12:52:36,395 - core.websocket_handler - INFO - тЬЕ TTS complete: 33 chunks sent
2026-02-03 12:52:36,395 - core.websocket_handler - INFO - тП░ Reset last_user_input_time after TTS for 5011922416
2026-02-03 12:52:36,396 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"tts_finished"}...
2026-02-03 12:52:36,397 - core.router - INFO - ЁЯЪА Dispatching tts_finished event to handler: handle_tts_finished
2026-02-03 12:52:36,397 - core.websocket_handler - INFO - ЁЯОд Mic enabled for 5011922416
2026-02-03 12:52:36,397 - core.router - INFO - тЬЕ Handler handle_tts_finished completed successfully
2026-02-03 12:52:38,925 - services.vad_silero - INFO - ЁЯОд Voice detected! (prob: 1.00)
2026-02-03 12:52:42,085 - services.vad_silero - INFO - ЁЯФЪ Speech ended, sending 116736 bytes to ASR
2026-02-03 12:52:42,085 - core.websocket_handler - INFO - ЁЯФН ASR: Processing audio for 5011922416
2026-02-03 12:52:43,154 - core.websocket_handler - INFO - ЁЯУЭ ASR Transcript: 'рдЬреИрдиреЗрд╡рд░реА 20 рдХреЛ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред'
2026-02-03 12:52:43,154 - core.websocket_handler - INFO - тП░ Updated last_user_input_time for 5011922416
2026-02-03 12:52:43,155 - core.websocket_handler - INFO - ЁЯУе Processing answer: 'рдЬреИрдиреЗрд╡рд░реА 20 рдХреЛ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред' for phase=conversation, question=0
2026-02-03 12:52:43,155 - flow.flow_manager - INFO - ЁЯФД Processing conversational response: 'рдЬреИрдиреЗрд╡рд░реА 20 рдХреЛ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред'
2026-02-03 12:52:43,155 - services.conversational_flow - INFO - ===== New Conversational Turn =====
2026-02-03 12:52:43,155 - services.conversational_flow - INFO - Customer Name: AAKASH  .
2026-02-03 12:52:43,155 - services.conversational_flow - INFO - User Input: рдЬреИрдиреЗрд╡рд░реА 20 рдХреЛ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред
2026-02-03 12:52:43,155 - services.conversational_flow - INFO - Session (before): {'session_id': 'session_ad748504_1770103260', 'customer_name': 'AAKASH  .', 'customer_name_english': 'AAKASH  .', 'identity_confirmed': 'YES', 'loan_taken': 'YES', 'last_month_payment': 'YES', 'payee': 'self', 'payment_date': None, 'payment_mode': None, 'payment_reason': None, 'payment_amount': None, 'conversation_started': True, 'last_bot_response': 'рд╕рдордЭ рдЧрдИ рд╣реВрдБ, рдХрд┐рд╕ рддрд╛рд░реАрдЦ рдХреЛ рднреБрдЧрддрд╛рди рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛?', 'identify_confirmation': None, 'availability': None, 'user_contact': None, 'last_month_emi_payment': None, 'payee_name': None, 'payee_contact': None, 'pay_date': None, 'mode_of_payment': None, 'field_executive_name': None, 'field_executive_contact': None, 'reason': None, 'amount': None, 'current_question': 0, 'retry_count': 0, 'call_should_end': False, 'call_end_reason': None, 'phase': 'conversation', 'generated_summary': None, 'summary_confirmed': False, 'product_type': 'рдкрд░реНрд╕рдирд▓ рд▓реЛрди', 'speaker_name': 'AAKASH', 'last_conversation_notes': 'рдЧреНрд░рд╛рд╣рдХ рдиреЗ рднреБрдЧрддрд╛рди рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рд╡реНрдпрдХреНрддрд┐ рдХреА рдкрд╣рдЪрд╛рди рд╕реНрд╡рдпрдВ рдХреЗ рд░реВрдк рдореЗрдВ рджреА рд╣реИ, рдЕрдм рднреБрдЧрддрд╛рди рддрд╛рд░реАрдЦ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкреВрдЫрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИ', 'speaker_relation': 'self'}
2026-02-03 12:52:43,155 - services.conversational_flow - INFO - Conversation Stage: date_collection
2026-02-03 12:52:43,156 - services.conversational_flow - INFO - Missing Information: ['payment date', 'payment method', 'payment reason', 'payment amount']
2026-02-03 12:52:53,722 - llm.gemini_client - INFO - ЁЯдЦ [Qubrid API] Response status: 200
2026-02-03 12:52:53,722 - llm.gemini_client - INFO - тП▒я╕П [Qubrid API] Latency: 10565.82 ms
2026-02-03 12:52:53,728 - llm.gemini_client - INFO - ЁЯУб [Qubrid API] Streaming response completed, content length: 2186 chars
2026-02-03 12:52:53,728 - llm.gemini_client - INFO - тЬЕ [Qubrid API] Response processed successfully - Latency: 10565.82ms, Tokens: N/A
2026-02-03 12:52:53,729 - services.conversational_flow - INFO - LLM Raw Response: {'bot_response': 'рдареАрдХ рд╣реИ, рдХреМрди рд╕рд╛ рднреБрдЧрддрд╛рди рд╡рд┐рдзрд┐ рдЙрдкрдпреЛрдЧ рдХреА рдЧрдИ рдереА?', 'extracted_data': {'identity_confirmed': 'YES', 'loan_taken': 'YES', 'last_month_payment': 'YES', 'payee': 'self', 'payment_date': '20/01/2025', 'payment_mode': None, 'payment_reason': None, 'payment_amount': None}, 'next_action': 'continue', 'provide_summary': False, 'missing_info': ['payment method', 'payment reason', 'payment amount'], 'call_end_reason': 'null', 'conversation_notes': 'рдЧреНрд░рд╛рд╣рдХ рдиреЗ рднреБрдЧрддрд╛рди рддрд╛рд░реАрдЦ рдкреНрд░рджрд╛рди рдХреА, рд╡рд░реНрддрдорд╛рди рд╡рд░реНрд╖ 2025 рдХреЗ рд╕рд╛рде рддрд╛рд░реАрдЦ рдХреЗ рд░реВрдкрд╛рдВрддрд░рдг рдХрд░ рд▓рд┐рдпрд╛ рдЧрдпрд╛ред рдЕрдЧрд▓рд╛ рд╕рд╡рд╛рд▓ рднреБрдЧрддрд╛рди рд╡рд┐рдзрд┐ рд╣реЛрдЧрд╛ред', '_latency_ms': 10565.82, '_model': 'nvidia/Orchestrator-8B'}
2026-02-03 12:52:53,730 - services.conversational_flow - INFO - Extracted Data from LLM: {'identity_confirmed': 'YES', 'loan_taken': 'YES', 'last_month_payment': 'YES', 'payee': 'self', 'payment_date': '20/01/2025', 'payment_mode': None, 'payment_reason': None, 'payment_amount': None}
2026-02-03 12:52:53,730 - services.conversational_flow - INFO - Next Action from LLM: continue
2026-02-03 12:52:53,730 - services.conversational_flow - INFO - Call End Reason from LLM: null
2026-02-03 12:52:53,730 - services.conversational_flow - INFO - Session (after): {'session_id': 'session_ad748504_1770103260', 'customer_name': 'AAKASH  .', 'customer_name_english': 'AAKASH  .', 'identity_confirmed': 'YES', 'loan_taken': 'YES', 'last_month_payment': 'YES', 'payee': 'self', 'payment_date': '20/01/2025', 'payment_mode': None, 'payment_reason': None, 'payment_amount': None, 'conversation_started': True, 'last_bot_response': 'рд╕рдордЭ рдЧрдИ рд╣реВрдБ, рдХрд┐рд╕ рддрд╛рд░реАрдЦ рдХреЛ рднреБрдЧрддрд╛рди рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛?', 'identify_confirmation': None, 'availability': None, 'user_contact': None, 'last_month_emi_payment': None, 'payee_name': None, 'payee_contact': None, 'pay_date': None, 'mode_of_payment': None, 'field_executive_name': None, 'field_executive_contact': None, 'reason': None, 'amount': None, 'current_question': 0, 'retry_count': 0, 'call_should_end': False, 'call_end_reason': None, 'phase': 'conversation', 'generated_summary': None, 'summary_confirmed': False, 'product_type': 'рдкрд░реНрд╕рдирд▓ рд▓реЛрди', 'speaker_name': 'AAKASH', 'last_conversation_notes': 'рдЧреНрд░рд╛рд╣рдХ рдиреЗ рднреБрдЧрддрд╛рди рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рд╡реНрдпрдХреНрддрд┐ рдХреА рдкрд╣рдЪрд╛рди рд╕реНрд╡рдпрдВ рдХреЗ рд░реВрдк рдореЗрдВ рджреА рд╣реИ, рдЕрдм рднреБрдЧрддрд╛рди рддрд╛рд░реАрдЦ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкреВрдЫрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИ', 'speaker_relation': 'self'}
2026-02-03 12:52:53,730 - core.websocket_handler - INFO - ЁЯУд Answer result: CONTINUE_CONVERSATION
2026-02-03 12:52:53,730 - core.websocket_handler - INFO - ЁЯТм Continuing conversation .
2026-02-03 12:52:53,731 - core.websocket_handler - INFO - ЁЯЧгя╕П TTS playing: рдареАрдХ рд╣реИ, рдХреМрди рд╕рд╛ рднреБрдЧрддрд╛рди рд╡рд┐рдзрд┐ рдЙрдкрдпреЛрдЧ рдХреА рдЧрдИ рдереА?...
2026-02-03 12:52:53,732 - services.tts_service - INFO - ЁЯО╡ TTS: рдареАрдХ рд╣реИ, рдХреМрди рд╕рд╛ рднреБрдЧрддрд╛рди рд╡рд┐рдзрд┐ рдЙрдкрдпреЛрдЧ рдХреА рдЧрдИ рдереА?...
2026-02-03 12:52:53,747 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"tts_started"}...
2026-02-03 12:52:53,747 - core.router - INFO - ЁЯЪА Dispatching tts_started event to handler: handle_tts_started
2026-02-03 12:52:53,747 - core.websocket_handler - INFO - ЁЯФЗ Mic disabled for 5011922416 (TTS playing)
2026-02-03 12:52:53,747 - core.router - INFO - тЬЕ Handler handle_tts_started completed successfully
2026-02-03 12:52:57,902 - services.tts_service - INFO - тЬЕ TTS complete: 36 chunks
2026-02-03 12:52:57,903 - core.websocket_handler - INFO - тЬЕ TTS complete: 36 chunks sent
2026-02-03 12:52:57,904 - core.websocket_handler - INFO - тП░ Reset last_user_input_time after TTS for 5011922416
2026-02-03 12:52:57,904 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"tts_finished"}...
2026-02-03 12:52:57,905 - core.router - INFO - ЁЯЪА Dispatching tts_finished event to handler: handle_tts_finished
2026-02-03 12:52:57,905 - core.websocket_handler - INFO - ЁЯОд Mic enabled for 5011922416
2026-02-03 12:52:57,905 - core.router - INFO - тЬЕ Handler handle_tts_finished completed successfully
2026-02-03 12:52:58,539 - services.vad_silero - INFO - ЁЯОд Voice detected! (prob: 1.00)
2026-02-03 12:53:06,059 - services.vad_silero - INFO - ЁЯФЪ Speech ended, sending 256000 bytes to ASR
2026-02-03 12:53:06,059 - core.websocket_handler - INFO - ЁЯФН ASR: Processing audio for 5011922416
2026-02-03 12:53:07,732 - core.websocket_handler - INFO - ЁЯУЭ ASR Transcript: 'рдореИрдВрдиреЗ UPI рд╕реЗ рдкреЗ рдХрд┐рдпрд╛ рдерд╛ рдФрд░ рдореИрдВрдиреЗ 3000 рд░реВрдкрдп EMI рдХреЗ рд▓реЗ рдкреЗ рдХрд┐рдпрд╛ рдерд╛ред'
2026-02-03 12:53:07,732 - core.websocket_handler - INFO - тП░ Updated last_user_input_time for 5011922416
2026-02-03 12:53:07,733 - core.websocket_handler - INFO - ЁЯУе Processing answer: 'рдореИрдВрдиреЗ UPI рд╕реЗ рдкреЗ рдХрд┐рдпрд╛ рдерд╛ рдФрд░ рдореИрдВрдиреЗ 3000 рд░реВрдкрдп EMI рдХреЗ рд▓реЗ рдкреЗ рдХрд┐рдпрд╛ рдерд╛ред' for phase=conversation, question=0
2026-02-03 12:53:07,733 - flow.flow_manager - INFO - ЁЯФД Processing conversational response: 'рдореИрдВрдиреЗ UPI рд╕реЗ рдкреЗ рдХрд┐рдпрд╛ рдерд╛ рдФрд░ рдореИрдВрдиреЗ 3000 рд░реВрдкрдп EMI рдХреЗ рд▓реЗ рдкреЗ рдХрд┐рдпрд╛ рдерд╛ред'
2026-02-03 12:53:07,734 - services.conversational_flow - INFO - ===== New Conversational Turn =====
2026-02-03 12:53:07,734 - services.conversational_flow - INFO - Customer Name: AAKASH  .
2026-02-03 12:53:07,734 - services.conversational_flow - INFO - User Input: рдореИрдВрдиреЗ UPI рд╕реЗ рдкреЗ рдХрд┐рдпрд╛ рдерд╛ рдФрд░ рдореИрдВрдиреЗ 3000 рд░реВрдкрдп EMI рдХреЗ рд▓реЗ рдкреЗ рдХрд┐рдпрд╛ рдерд╛ред
2026-02-03 12:53:07,734 - services.conversational_flow - INFO - Session (before): {'session_id': 'session_ad748504_1770103260', 'customer_name': 'AAKASH  .', 'customer_name_english': 'AAKASH  .', 'identity_confirmed': 'YES', 'loan_taken': 'YES', 'last_month_payment': 'YES', 'payee': 'self', 'payment_date': '20/01/2025', 'payment_mode': None, 'payment_reason': None, 'payment_amount': None, 'conversation_started': True, 'last_bot_response': 'рдареАрдХ рд╣реИ, рдХреМрди рд╕рд╛ рднреБрдЧрддрд╛рди рд╡рд┐рдзрд┐ рдЙрдкрдпреЛрдЧ рдХреА рдЧрдИ рдереА?', 'identify_confirmation': None, 'availability': None, 'user_contact': None, 'last_month_emi_payment': None, 'payee_name': None, 'payee_contact': None, 'pay_date': None, 'mode_of_payment': None, 'field_executive_name': None, 'field_executive_contact': None, 'reason': None, 'amount': None, 'current_question': 0, 'retry_count': 0, 'call_should_end': False, 'call_end_reason': None, 'phase': 'conversation', 'generated_summary': None, 'summary_confirmed': False, 'product_type': 'рдкрд░реНрд╕рдирд▓ рд▓реЛрди', 'speaker_name': 'AAKASH', 'last_conversation_notes': 'рдЧреНрд░рд╛рд╣рдХ рдиреЗ рднреБрдЧрддрд╛рди рддрд╛рд░реАрдЦ рдкреНрд░рджрд╛рди рдХреА, рд╡рд░реНрддрдорд╛рди рд╡рд░реНрд╖ 2025 рдХреЗ рд╕рд╛рде рддрд╛рд░реАрдЦ рдХреЗ рд░реВрдкрд╛рдВрддрд░рдг рдХрд░ рд▓рд┐рдпрд╛ рдЧрдпрд╛ред рдЕрдЧрд▓рд╛ рд╕рд╡рд╛рд▓ рднреБрдЧрддрд╛рди рд╡рд┐рдзрд┐ рд╣реЛрдЧрд╛ред', 'speaker_relation': 'self'}
2026-02-03 12:53:07,734 - services.conversational_flow - INFO - Conversation Stage: mode_collection
2026-02-03 12:53:07,734 - services.conversational_flow - INFO - Missing Information: ['payment method', 'payment reason', 'payment amount']
2026-02-03 12:53:16,347 - llm.gemini_client - INFO - ЁЯдЦ [Qubrid API] Response status: 200
2026-02-03 12:53:16,348 - llm.gemini_client - INFO - тП▒я╕П [Qubrid API] Latency: 8612.82 ms
2026-02-03 12:53:16,354 - llm.gemini_client - INFO - ЁЯУб [Qubrid API] Streaming response completed, content length: 1906 chars
2026-02-03 12:53:16,355 - llm.gemini_client - INFO - тЬЕ [Qubrid API] Response processed successfully - Latency: 8612.82ms, Tokens: N/A
2026-02-03 12:53:16,356 - services.conversational_flow - INFO - LLM Raw Response: {'bot_response': 'рдЕрдЪреНрдЫрд╛, рдХреНрдпрд╛ рдпрд╣ рдЬрд╛рдирдХрд╛рд░реА рд╕рд╣реА рд╣реИ?', 'extracted_data': {'identity_confirmed': 'YES', 'loan_taken': 'YES', 'last_month_payment': 'YES', 'payee': 'self', 'payment_date': '20/01/2025', 'payment_mode': 'online_lan', 'payment_reason': 'emi', 'payment_amount': 3000}, 'next_action': 'end_call', 'provide_summary': True, 'call_end_reason': 'completed', '_latency_ms': 8612.82, '_model': 'nvidia/Orchestrator-8B'}
2026-02-03 12:53:16,356 - services.conversational_flow - INFO - Extracted Data from LLM: {'identity_confirmed': 'YES', 'loan_taken': 'YES', 'last_month_payment': 'YES', 'payee': 'self', 'payment_date': '20/01/2025', 'payment_mode': 'online_lan', 'payment_reason': 'emi', 'payment_amount': 3000}
2026-02-03 12:53:16,356 - services.conversational_flow - INFO - Next Action from LLM: end_call
2026-02-03 12:53:16,356 - services.conversational_flow - INFO - Call End Reason from LLM: completed
2026-02-03 12:53:16,356 - services.conversational_flow - INFO - Session (after): {'session_id': 'session_ad748504_1770103260', 'customer_name': 'AAKASH  .', 'customer_name_english': 'AAKASH  .', 'identity_confirmed': 'YES', 'loan_taken': 'YES', 'last_month_payment': 'YES', 'payee': 'self', 'payment_date': '20/01/2025', 'payment_mode': 'online_lan', 'payment_reason': 'emi', 'payment_amount': 3000, 'conversation_started': True, 'last_bot_response': 'рдареАрдХ рд╣реИ, рдХреМрди рд╕рд╛ рднреБрдЧрддрд╛рди рд╡рд┐рдзрд┐ рдЙрдкрдпреЛрдЧ рдХреА рдЧрдИ рдереА?', 'identify_confirmation': None, 'availability': None, 'user_contact': None, 'last_month_emi_payment': None, 'payee_name': None, 'payee_contact': None, 'pay_date': None, 'mode_of_payment': None, 'field_executive_name': None, 'field_executive_contact': None, 'reason': None, 'amount': None, 'current_question': 0, 'retry_count': 0, 'call_should_end': False, 'call_end_reason': None, 'phase': 'conversation', 'generated_summary': None, 'summary_confirmed': False, 'product_type': 'рдкрд░реНрд╕рдирд▓ рд▓реЛрди', 'speaker_name': 'AAKASH', 'last_conversation_notes': 'рдЧреНрд░рд╛рд╣рдХ рдиреЗ рднреБрдЧрддрд╛рди рддрд╛рд░реАрдЦ рдкреНрд░рджрд╛рди рдХреА, рд╡рд░реНрддрдорд╛рди рд╡рд░реНрд╖ 2025 рдХреЗ рд╕рд╛рде рддрд╛рд░реАрдЦ рдХреЗ рд░реВрдкрд╛рдВрддрд░рдг рдХрд░ рд▓рд┐рдпрд╛ рдЧрдпрд╛ред рдЕрдЧрд▓рд╛ рд╕рд╡рд╛рд▓ рднреБрдЧрддрд╛рди рд╡рд┐рдзрд┐ рд╣реЛрдЧрд╛ред', 'speaker_relation': 'self'}
2026-02-03 12:53:16,356 - services.conversational_flow - INFO - ЁЯУЭ Summary provided in bot_response
2026-02-03 12:53:16,356 - flow.flow_manager - INFO - ЁЯУЭ Summary provided in conversational response
2026-02-03 12:53:16,356 - services.summary_service - INFO - ================================================================================
2026-02-03 12:53:16,357 - services.summary_service - INFO - ЁЯдЦ LLM CALL (detect_confirmation) - Input:
2026-02-03 12:53:16,357 - services.summary_service - INFO - User response: рдореИрдВрдиреЗ UPI рд╕реЗ рдкреЗ рдХрд┐рдпрд╛ рдерд╛ рдФрд░ рдореИрдВрдиреЗ 3000 рд░реВрдкрдп EMI рдХреЗ рд▓реЗ рдкреЗ рдХрд┐рдпрд╛ рдерд╛ред
2026-02-03 12:53:16,357 - services.summary_service - INFO - --------------------------------------------------------------------------------
2026-02-03 12:53:16,357 - core.websocket_handler - INFO - ЁЯУд Answer result: CLOSING
2026-02-03 12:53:16,357 - core.websocket_handler - INFO - ЁЯСЛ Saying closing statement...
2026-02-03 12:53:16,358 - utils.session_data_storage - INFO - ЁЯТ╛ Saved session data for session: session_ad748504_1770103260 (fields: 22)
2026-02-03 12:53:16,358 - core.websocket_handler - INFO - ЁЯЧгя╕П TTS playing: рдзрдиреНрдпрд╡рд╛рдж рдЖрдкрдХреЗ рд╕рдордп рдХреЗ рд▓рд┐рдПред
рдЖрдкрдХреА рдлреАрдбрдмреИрдХ рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдмрд╣реБ...
2026-02-03 12:53:16,359 - services.tts_service - INFO - ЁЯО╡ TTS: рдзрдиреНрдпрд╡рд╛рдж рдЖрдкрдХреЗ рд╕рдордп рдХреЗ рд▓рд┐рдПред
рдЖрдкрдХреА рдлреАрдбрдмреИрдХ рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдмрд╣реБ...
2026-02-03 12:53:16,369 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"tts_started"}...
2026-02-03 12:53:16,369 - core.router - INFO - ЁЯЪА Dispatching tts_started event to handler: handle_tts_started
2026-02-03 12:53:16,369 - core.websocket_handler - INFO - ЁЯФЗ Mic disabled for 5011922416 (TTS playing)
2026-02-03 12:53:16,370 - core.router - INFO - тЬЕ Handler handle_tts_started completed successfully
2026-02-03 12:53:23,804 - services.tts_service - INFO - тЬЕ TTS complete: 57 chunks
2026-02-03 12:53:23,805 - core.websocket_handler - INFO - тЬЕ TTS complete: 57 chunks sent
2026-02-03 12:53:23,806 - core.websocket_handler - INFO - тП░ Reset last_user_input_time after TTS for 5011922416
2026-02-03 12:53:23,807 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"tts_finished"}...
2026-02-03 12:53:23,807 - core.router - INFO - ЁЯЪА Dispatching tts_finished event to handler: handle_tts_finished
2026-02-03 12:53:23,808 - core.websocket_handler - INFO - тЬЕ Survey completed, call ended
2026-02-03 12:53:23,808 - core.router - INFO - тЬЕ Handler handle_tts_finished completed successfully
2026-02-03 13:07:35,197 - core.websocket_handler - ERROR - Error in WebSocket loop: Cannot call "receive" once a disconnect message has been received.
2026-02-03 13:13:36,732 - llm.gemini_client - INFO - тЬЕ LangChain OpenAI client initialized successfully
2026-02-03 13:13:37,900 - core.router - INFO - тЬЕ Registered handler for event type: init_session -> handle_init_session
2026-02-03 13:13:37,900 - core.router - INFO - тЬЕ Registered handler for event type: tts_finished -> handle_tts_finished
2026-02-03 13:13:37,901 - core.router - INFO - тЬЕ Registered handler for event type: tts_started -> handle_tts_started
2026-02-03 13:13:37,901 - core.router - INFO - тЬЕ Registered handler for event type: tts_request -> handle_tts_request
2026-02-03 13:13:37,901 - core.router - INFO - тЬЕ Registered handler for event type: ping -> handle_ping
2026-02-03 13:13:45,014 - services.summary_service - INFO - ================================================================================
2026-02-03 13:13:45,014 - services.summary_service - INFO - ЁЯдЦ LLM CALL (transliterate_to_devanagari) - Input:
2026-02-03 13:13:45,015 - services.summary_service - INFO - Name: AAKASH  PAWAR
2026-02-03 13:13:45,015 - services.summary_service - INFO - --------------------------------------------------------------------------------
2026-02-03 13:13:47,913 - httpx - INFO - HTTP Request: POST http://192.168.30.132:8001/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-03 13:13:47,947 - llm.gemini_client - INFO - ЁЯдЦ [LangChain OpenAI] Response received
2026-02-03 13:13:47,947 - llm.gemini_client - INFO - тП▒я╕П [LangChain OpenAI] Latency: 2932.06 ms
2026-02-03 13:13:47,947 - llm.gemini_client - INFO - тЬЕ [LangChain OpenAI] Response processed successfully - Latency: 2932.06ms, Tokens: N/A
2026-02-03 13:13:47,947 - services.summary_service - INFO - ЁЯУе LLM CALL (transliterate_to_devanagari) - Response:
2026-02-03 13:13:47,947 - services.summary_service - INFO - Devanagari Name: рдЖрдХрд╛рд╢ рдкрд╡рд╛рд░
2026-02-03 13:13:47,947 - services.summary_service - INFO - --------------------------------------------------------------------------------
2026-02-03 13:13:47,947 - services.summary_service - INFO - тЬЕ LLM CALL (transliterate_to_devanagari) - Result: рдЖрдХрд╛рд╢ рдкрд╡рд╛рд░
2026-02-03 13:13:47,947 - services.summary_service - INFO - ================================================================================
2026-02-03 13:13:48,563 - utils.session_data_storage - INFO - ЁЯТ╛ Saved DB data for session: session_2248e61f_1770104625
2026-02-03 13:13:51,823 - httpx - INFO - HTTP Request: POST http://192.168.30.132:8001/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-03 13:13:51,871 - llm.gemini_client - INFO - ЁЯдЦ [LangChain OpenAI] Response received
2026-02-03 13:13:51,871 - llm.gemini_client - INFO - тП▒я╕П [LangChain OpenAI] Latency: 3306.70 ms
2026-02-03 13:13:51,871 - llm.gemini_client - ERROR - тЭМ [LangChain OpenAI] JSON Decode Error: Expecting value: line 1 column 1 (char 0)
2026-02-03 13:13:51,871 - llm.gemini_client - ERROR - [LangChain OpenAI] Response content: analysisto produce greeting for a female CS rep. Should be warm, professional, greet the customer, confirm speaking to the right person. Use name "рдЖрдХрд╛рд╢ рдкрд╡рд╛рд░". It's gender neutral? But we greet to that name. Use feminine form: "рдмрд╛рдд рдХрд░ рд░рд╣реА рд╣реВрдБ". Use natural conversational tone. Should say "рдирдорд╕реНрддреЗ рдЖрдХрд╛рд╢ рдкрд╡рд╛рд░ рдЬреА, рдореИрдВ рд▓рд┐рдЯреЗрд▓ рдПрдВрдб рдЯреЗрдХреНрд╕рдЯрд╛рдЗрд▓ рдлрд╛рдЗрдиреЗрдВрд╕ рд╕реЗ рдмрд╛рдд рдХрд░ рд░рд╣реА рд╣реВрдБред"

We need to check the requirements: "Use feminine form: 'рдмрд╛рдд рдХрд░ рд░рд╣реА рд╣реВрдБ' (not 'рдмрд╛рдд рдХрд░ рд░рд╣рд╛ рд╣реВрдБ')" So we must use feminine pronoun. "I'm talking" -> "рдореИрдВ рдмрд╛рдд рдХрд░ рд░рд╣реА рд╣реВрдБ". Confirm speaking to the right person: "рдХреНрдпрд╛ рдореИрдВ рд╕рд╣реА рд╡реНрдпрдХреНрддрд┐ рд╕реЗ рдмрд╛рдд рдХрд░ рд░рд╣реА рд╣реВрдБ?" Maybe "рдХреНрдпрд╛ рдЖрдк рдЖрдХрд╛рд╢ рдкрд╡рд╛рд░ рдЬреА рд╣реИрдВ?" Or "рдХреНрдпрд╛ рдореИрдВ рдЖрдкрдХреЛ рд╕рд╣реА рдкрддреЗ рдкрд░ рдкрд╣реБрдБрдЪ рд░рд╣реА рд╣реВрдБ?" We need to confirm.

We also need to be warm, professional, natural conversation. Use the customer's name appropriately. So greeting could be:

"рдирдорд╕реНрддреЗ рдЖрдХрд╛рд╢ рдкрд╡рд╛рд░ рдЬреА, рдореИрдВ рд▓рд┐рдЯреЗрд▓ рдПрдВрдб рдЯреЗрдХреНрд╕рдЯрд╛рдЗрд▓ рдлрд╛рдЗрдиреЗрдВрд╕ (L&T Finance) рд╕реЗ рдмрд╛рдд рдХрд░ рд░рд╣реА рд╣реВрдБ, рдХреНрдпрд╛ рдореИрдВ рд╕рд╣реА рд╡реНрдпрдХреНрддрд┐ рд╕реЗ рдмрд╛рдд
2026-02-03 13:13:51,877 - core.websocket_handler - INFO - ЁЯФМ WebSocket connection attempt received
2026-02-03 13:13:51,877 - core.websocket_handler - INFO - тЬЕ WebSocket accepted
2026-02-03 13:13:51,877 - core.websocket_handler - INFO - ЁЯУЭ WebSocket ID assigned: 4491587328
2026-02-03 13:13:51,877 - core.websocket_handler - INFO - ЁЯУК Connection state initialized for 4491587328
2026-02-03 13:13:51,877 - core.websocket_handler - INFO - тЬЕ WebSocket connected: 4491587328
2026-02-03 13:13:51,877 - core.websocket_handler - INFO - ЁЯЪА Starting background tasks for 4491587328
2026-02-03 13:13:51,877 - core.websocket_handler - INFO - тЬЕ Background tasks started for 4491587328
2026-02-03 13:13:51,878 - core.websocket_handler - INFO - ЁЯУд Sent websocket_ready message to client
2026-02-03 13:13:51,983 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"init_session","session_id":"session_2248e61f_1770104625","customer_name":"AAKASH  PAWAR"}...
2026-02-03 13:13:51,983 - core.router - INFO - ЁЯЪА Dispatching init_session event to handler: handle_init_session
2026-02-03 13:13:51,983 - core.websocket_handler - INFO - ЁЯУЮ Outbound call to: AAKASH  PAWAR (session: session_2248e61f_1770104625)
2026-02-03 13:13:54,926 - httpx - INFO - HTTP Request: POST http://192.168.30.132:8001/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-03 13:13:54,943 - llm.gemini_client - INFO - ЁЯдЦ [LangChain OpenAI] Response received
2026-02-03 13:13:54,943 - llm.gemini_client - INFO - тП▒я╕П [LangChain OpenAI] Latency: 2958.99 ms
2026-02-03 13:13:54,943 - llm.gemini_client - ERROR - тЭМ [LangChain OpenAI] JSON Decode Error: Expecting value: line 1 column 1 (char 0)
2026-02-03 13:13:54,943 - llm.gemini_client - ERROR - [LangChain OpenAI] Response content: analysisto produce greeting from a female representative. Must say "рдмрд╛рдд рдХрд░ рд░рд╣реА рд╣реВрдБ" not "рдмрд╛рдд рдХрд░ рд░рд╣рд╛ рд╣реВрдБ". So greeting: "рдирдорд╕реНрддреЗ рдЖрдХрд╛рд╢ рдЬреА, рдореИрдВ рдПрд▓ рдПрдВрдб рдЯреА рдлрд╛рдЗрдиреЗрдВрд╕ рдХреА рдЧреНрд░рд╛рд╣рдХ рд╕реЗрд╡рд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐ [Name] рдмреЛрд▓ рд░рд╣реА рд╣реВрдБред рдХреНрдпрд╛ рдореИрдВ рд╕рд╣реА рд╡реНрдпрдХреНрддрд┐ рд╕реЗ рдмрд╛рдд рдХрд░ рд░рд╣реА рд╣реВрдБ?" Or something like that. Must confirm speaking to the right person. The greeting should sound natural, warm, professional. Use feminine language. Must not add any other text. Only greeting. Make sure to use "рдмрд╛рдд рдХрд░ рд░рд╣реА рд╣реВрдБ" exactly. Also greet, say "рдирдорд╕реНрддреЗ рдЖрдХрд╛рд╢ рдЬреА" or "рдирдорд╕реНрддреЗ рдЖрдХрд╛рд╢ рдкрд╡рд╛рд░ рдЬреА". The requirement: Use customer's name appropriately. So "рдирдорд╕реНрддреЗ рдЖрдХрд╛рд╢ рдкрд╡рд╛рд░ рдЬреА" or "рдирдорд╕реНрддреЗ рдЖрдХрд╛рд╢ рдкрд╡рд╛рд░ рдЬреА, рдореИрдВ..." The requirement also: "Confirm you're speaking to the right person." So we might say "рдХреГрдкрдпрд╛ рдкреБрд╖реНрдЯрд┐ рдХрд░реЗрдВ рдХрд┐ рдореИрдВ рд╕рд╣реА рд╡реНрдпрдХреНрддрд┐ рд╕реЗ рдмрд╛рдд рдХрд░ рд░рд╣реА рд╣реВрдБред"

Better: "рдирдорд╕реНрддреЗ рдЖрдХрд╛рд╢ рдкрд╡рд╛рд░ рдЬреА, рдореИрдВ рдПрд▓ рдПрдВрдб рдЯреА рдлрд╛рдЗрдиреЗрдВрд╕ рдХреА рдЧреНрд░рд╛рд╣рдХ рд╕реЗрд╡рд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐ [рдЖрдкрдХрд╛ рдирд╛рдо] рдмреЛрд▓ рд░рд╣реА рд╣реВрдБред рдХреНрдпрд╛ рдореИрдВ рд╕рд╣реА рд╡реНрдпрдХреНрддрд┐ рд╕реЗ рдмрд╛рдд рдХрд░
2026-02-03 13:13:54,943 - core.websocket_handler - INFO - ЁЯУЛ Sending first question: рдирдорд╕реНрддреЗ, рдореИрдВ рдПрд▓ рдПрдВрдб рдЯреА рдлрд╛рдЗрдиреЗрдВрд╕ рдХреА рддрд░рдлрд╝ рд╕реЗ рдмрд╛рдд рдХрд░ рд░рд╣реА рд╣реВрдБ, рдХреНрдпрд╛ рдореЗрд░реА рдмрд╛рдд рдЖрдХрд╛рд╢ рдкрд╡рд╛рд░ рдЬреА рд╕реЗ рд╣реЛ рд░рд╣реА рд╣реИ?
2026-02-03 13:13:54,943 - core.router - INFO - тЬЕ Handler handle_init_session completed successfully
2026-02-03 13:13:54,943 - core.websocket_handler - INFO - ЁЯЧгя╕П TTS playing: рдирдорд╕реНрддреЗ, рдореИрдВ рдПрд▓ рдПрдВрдб рдЯреА рдлрд╛рдЗрдиреЗрдВрд╕ рдХреА рддрд░рдлрд╝ рд╕реЗ рдмрд╛рдд рдХрд░ рд░рд╣...
2026-02-03 13:13:54,943 - services.tts_service - INFO - ЁЯО╡ TTS: рдирдорд╕реНрддреЗ, рдореИрдВ рдПрд▓ рдПрдВрдб рдЯреА рдлрд╛рдЗрдиреЗрдВрд╕ рдХреА рддрд░рдлрд╝ рд╕реЗ рдмрд╛рдд рдХрд░ рд░рд╣...
2026-02-03 13:13:54,950 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"tts_started"}...
2026-02-03 13:13:54,950 - core.router - INFO - ЁЯЪА Dispatching tts_started event to handler: handle_tts_started
2026-02-03 13:13:54,950 - core.websocket_handler - INFO - ЁЯФЗ Mic disabled for 4491587328 (TTS playing)
2026-02-03 13:13:54,950 - core.router - INFO - тЬЕ Handler handle_tts_started completed successfully
2026-02-03 13:14:02,293 - services.tts_service - INFO - тЬЕ TTS complete: 67 chunks
2026-02-03 13:14:02,294 - core.websocket_handler - INFO - тЬЕ TTS complete: 67 chunks sent
2026-02-03 13:14:02,295 - core.websocket_handler - INFO - тП░ Reset last_user_input_time after TTS for 4491587328
2026-02-03 13:14:02,296 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"tts_finished"}...
2026-02-03 13:14:02,296 - core.router - INFO - ЁЯЪА Dispatching tts_finished event to handler: handle_tts_finished
2026-02-03 13:14:02,297 - core.websocket_handler - INFO - ЁЯОд Mic enabled for 4491587328
2026-02-03 13:14:02,297 - core.router - INFO - тЬЕ Handler handle_tts_finished completed successfully
2026-02-03 13:14:03,233 - services.vad_silero - INFO - ЁЯОд Voice detected! (prob: 0.99)
2026-02-03 13:14:06,912 - services.vad_silero - INFO - ЁЯФЪ Speech ended, sending 133120 bytes to ASR
2026-02-03 13:14:06,913 - core.websocket_handler - INFO - ЁЯФН ASR: Processing audio for 4491587328
2026-02-03 13:14:08,187 - core.websocket_handler - INFO - ЁЯУЭ ASR Transcript: 'рд╣рд╛рдБ рдореИрдВ рдЕрдХрд╛рд╢ рдкрд╡рд░ рдмреЛрд▓ рд░рд╣реВрдВред'
2026-02-03 13:14:08,187 - core.websocket_handler - INFO - тП░ Updated last_user_input_time for 4491587328
2026-02-03 13:14:08,188 - core.websocket_handler - INFO - ЁЯУе Processing answer: 'рд╣рд╛рдБ рдореИрдВ рдЕрдХрд╛рд╢ рдкрд╡рд░ рдмреЛрд▓ рд░рд╣реВрдВред' for phase=conversation, question=0
2026-02-03 13:14:08,188 - flow.flow_manager - INFO - ЁЯФД Processing conversational response: 'рд╣рд╛рдБ рдореИрдВ рдЕрдХрд╛рд╢ рдкрд╡рд░ рдмреЛрд▓ рд░рд╣реВрдВред'
2026-02-03 13:14:08,188 - services.conversational_flow - INFO - ===== New Conversational Turn =====
2026-02-03 13:14:08,188 - services.conversational_flow - INFO - Customer Name: рдЖрдХрд╛рд╢ рдкрд╡рд╛рд░
2026-02-03 13:14:08,188 - services.conversational_flow - INFO - User Input: рд╣рд╛рдБ рдореИрдВ рдЕрдХрд╛рд╢ рдкрд╡рд░ рдмреЛрд▓ рд░рд╣реВрдВред
2026-02-03 13:14:08,188 - services.conversational_flow - INFO - Session (before): {'session_id': 'session_2248e61f_1770104625', 'customer_name': 'рдЖрдХрд╛рд╢ рдкрд╡рд╛рд░', 'customer_name_english': 'AAKASH  PAWAR', 'identity_confirmed': None, 'loan_taken': None, 'last_month_payment': None, 'payee': None, 'payment_date': None, 'payment_mode': None, 'payment_reason': None, 'payment_amount': None, 'conversation_started': True, 'last_bot_response': None, 'identify_confirmation': None, 'availability': None, 'user_contact': None, 'last_month_emi_payment': None, 'payee_name': None, 'payee_contact': None, 'pay_date': None, 'mode_of_payment': None, 'field_executive_name': None, 'field_executive_contact': None, 'reason': None, 'amount': None, 'current_question': 0, 'retry_count': 0, 'call_should_end': False, 'call_end_reason': None, 'phase': 'conversation', 'generated_summary': None, 'summary_confirmed': False, 'product_type': 'рдкрд░реНрд╕рдирд▓ рд▓реЛрди'}
2026-02-03 13:14:08,188 - services.conversational_flow - INFO - Conversation Stage: identity_confirmation
2026-02-03 13:14:08,188 - services.conversational_flow - INFO - Missing Information: ['identity confirmation', 'loan confirmation', 'last month payment confirmation', 'who made payment', 'payment date', 'payment method', 'payment reason', 'payment amount']
2026-02-03 13:14:15,057 - httpx - INFO - HTTP Request: POST http://192.168.30.132:8001/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-03 13:14:15,091 - llm.gemini_client - INFO - ЁЯдЦ [LangChain OpenAI] Response received
2026-02-03 13:14:15,092 - llm.gemini_client - INFO - тП▒я╕П [LangChain OpenAI] Latency: 6903.26 ms
2026-02-03 13:14:15,092 - llm.gemini_client - ERROR - тЭМ [LangChain OpenAI] JSON Decode Error: Expecting value: line 1 column 1 (char 0)
2026-02-03 13:14:15,092 - llm.gemini_client - ERROR - [LangChain OpenAI] Response content: analysisto produce JSON response according to given format. Summarize conversation: We are at identity_confirmation. The customer says "рд╣рд╛рдБ рдореИрдВ рдЕрдХрд╛рд╢ рдкрд╡рд░ рдмреЛрд▓ рд░рд╣реВрдВред" Actually they are saying "Yes I am Akash Pawar speaking." So name is Akash Pawar. The identity_confirmed is probably "YES". They are confirming they are the customer. Also loan_taken? not yet. last_month_payment? not yet. payee? not yet. payment_date? not yet. payment_mode? not yet. payment_reason? not yet. payment_amount? not yet. The "speaker_name" field should be "рдЖрдХрд╛рд╢ рдкрд╡рд╛рд░" or "Akash Pawar"? Should follow rule: only in first greeting we can use name. We have collected identity? yes. So we can use it here. Next we need to ask the next missing information. According to missing_info list: loan confirmation, last month payment check, who made payment, payment date, payment method, payment reason, payment amount. We need to ask next question. Maybe ask: "рдХреНрдпрд╛ рдЖрдкрдиреЗ рдЕрднреА рдЛрдг рд▓рд┐рдпрд╛ рд╣реИ?" which is loan_taken. So ask "рдХреНрдпрд╛ рдЖрдкрдиреЗ рдЕрднреА рдЛрдг рд▓рд┐рдпрд╛ рд╣реИ?" Also we need to ask who made the payment:
2026-02-03 13:14:15,092 - services.conversational_flow - INFO - LLM Raw Response: {'value': 'UNCLEAR', 'is_clear': False}
2026-02-03 13:14:15,092 - services.conversational_flow - INFO - Extracted Data from LLM: None
2026-02-03 13:14:15,092 - services.conversational_flow - INFO - Next Action from LLM: None
2026-02-03 13:14:15,092 - services.conversational_flow - INFO - Call End Reason from LLM: None
2026-02-03 13:14:15,092 - services.conversational_flow - INFO - Session (after): {'session_id': 'session_2248e61f_1770104625', 'customer_name': 'рдЖрдХрд╛рд╢ рдкрд╡рд╛рд░', 'customer_name_english': 'AAKASH  PAWAR', 'identity_confirmed': None, 'loan_taken': None, 'last_month_payment': None, 'payee': None, 'payment_date': None, 'payment_mode': None, 'payment_reason': None, 'payment_amount': None, 'conversation_started': True, 'last_bot_response': None, 'identify_confirmation': None, 'availability': None, 'user_contact': None, 'last_month_emi_payment': None, 'payee_name': None, 'payee_contact': None, 'pay_date': None, 'mode_of_payment': None, 'field_executive_name': None, 'field_executive_contact': None, 'reason': None, 'amount': None, 'current_question': 0, 'retry_count': 0, 'call_should_end': False, 'call_end_reason': None, 'phase': 'conversation', 'generated_summary': None, 'summary_confirmed': False, 'product_type': 'рдкрд░реНрд╕рдирд▓ рд▓реЛрди'}
2026-02-03 13:14:15,092 - core.websocket_handler - INFO - ЁЯУд Answer result: CONTINUE_CONVERSATION
2026-02-03 13:14:15,092 - core.websocket_handler - INFO - ЁЯТм Continuing conversation .
2026-02-03 13:14:15,093 - core.websocket_handler - INFO - ЁЯЧгя╕П TTS playing: рдХреГрдкрдпрд╛ рджреЛрдмрд╛рд░рд╛ рдмрддрд╛рдЗрдПред...
2026-02-03 13:14:15,093 - services.tts_service - INFO - ЁЯО╡ TTS: рдХреГрдкрдпрд╛ рджреЛрдмрд╛рд░рд╛ рдмрддрд╛рдЗрдПред...
2026-02-03 13:14:15,100 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"tts_started"}...
2026-02-03 13:14:15,100 - core.router - INFO - ЁЯЪА Dispatching tts_started event to handler: handle_tts_started
2026-02-03 13:14:15,100 - core.websocket_handler - INFO - ЁЯФЗ Mic disabled for 4491587328 (TTS playing)
2026-02-03 13:14:15,100 - core.router - INFO - тЬЕ Handler handle_tts_started completed successfully
2026-02-03 13:14:17,923 - services.tts_service - INFO - тЬЕ TTS complete: 25 chunks
2026-02-03 13:14:17,924 - core.websocket_handler - INFO - тЬЕ TTS complete: 25 chunks sent
2026-02-03 13:14:17,925 - core.websocket_handler - INFO - тП░ Reset last_user_input_time after TTS for 4491587328
2026-02-03 13:14:17,925 - services.google_sheet_logger - WARNING - Google Sheet creds not found at /Users/snehakiranmanded/LTFS_Conversational_Flow/backend/google_sheet_creds.json - sheet logging disabled
2026-02-03 13:14:17,926 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"tts_finished"}...
2026-02-03 13:14:17,926 - core.router - INFO - ЁЯЪА Dispatching tts_finished event to handler: handle_tts_finished
2026-02-03 13:14:17,926 - core.websocket_handler - INFO - ЁЯОд Mic enabled for 4491587328
2026-02-03 13:14:17,926 - core.router - INFO - тЬЕ Handler handle_tts_finished completed successfully
2026-02-03 13:14:19,771 - services.vad_silero - INFO - ЁЯОд Voice detected! (prob: 1.00)
2026-02-03 13:14:21,915 - services.vad_silero - INFO - ЁЯФЪ Speech ended, sending 83968 bytes to ASR
2026-02-03 13:14:21,915 - core.websocket_handler - INFO - ЁЯФН ASR: Processing audio for 4491587328
2026-02-03 13:14:22,807 - core.websocket_handler - INFO - ЁЯУЭ ASR Transcript: 'рдореИрдВ рдЕрдХрд╛рд╢ рдмреЛрд▓ рд░рд╣рд╛ рд╣реВрдВред'
2026-02-03 13:14:22,807 - core.websocket_handler - INFO - тП░ Updated last_user_input_time for 4491587328
2026-02-03 13:14:22,807 - core.websocket_handler - INFO - ЁЯУе Processing answer: 'рдореИрдВ рдЕрдХрд╛рд╢ рдмреЛрд▓ рд░рд╣рд╛ рд╣реВрдВред' for phase=conversation, question=0
2026-02-03 13:14:22,807 - flow.flow_manager - INFO - ЁЯФД Processing conversational response: 'рдореИрдВ рдЕрдХрд╛рд╢ рдмреЛрд▓ рд░рд╣рд╛ рд╣реВрдВред'
2026-02-03 13:14:22,807 - services.conversational_flow - INFO - ===== New Conversational Turn =====
2026-02-03 13:14:22,807 - services.conversational_flow - INFO - Customer Name: рдЖрдХрд╛рд╢ рдкрд╡рд╛рд░
2026-02-03 13:14:22,807 - services.conversational_flow - INFO - User Input: рдореИрдВ рдЕрдХрд╛рд╢ рдмреЛрд▓ рд░рд╣рд╛ рд╣реВрдВред
2026-02-03 13:14:22,807 - services.conversational_flow - INFO - Session (before): {'session_id': 'session_2248e61f_1770104625', 'customer_name': 'рдЖрдХрд╛рд╢ рдкрд╡рд╛рд░', 'customer_name_english': 'AAKASH  PAWAR', 'identity_confirmed': None, 'loan_taken': None, 'last_month_payment': None, 'payee': None, 'payment_date': None, 'payment_mode': None, 'payment_reason': None, 'payment_amount': None, 'conversation_started': True, 'last_bot_response': 'рдХреГрдкрдпрд╛ рджреЛрдмрд╛рд░рд╛ рдмрддрд╛рдЗрдПред', 'identify_confirmation': None, 'availability': None, 'user_contact': None, 'last_month_emi_payment': None, 'payee_name': None, 'payee_contact': None, 'pay_date': None, 'mode_of_payment': None, 'field_executive_name': None, 'field_executive_contact': None, 'reason': None, 'amount': None, 'current_question': 0, 'retry_count': 0, 'call_should_end': False, 'call_end_reason': None, 'phase': 'conversation', 'generated_summary': None, 'summary_confirmed': False, 'product_type': 'рдкрд░реНрд╕рдирд▓ рд▓реЛрди', 'last_conversation_notes': ''}
2026-02-03 13:14:22,807 - services.conversational_flow - INFO - Conversation Stage: identity_confirmation
2026-02-03 13:14:22,807 - services.conversational_flow - INFO - Missing Information: ['identity confirmation', 'loan confirmation', 'last month payment confirmation', 'who made payment', 'payment date', 'payment method', 'payment reason', 'payment amount']
2026-02-03 13:14:29,417 - httpx - INFO - HTTP Request: POST http://192.168.30.132:8001/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-03 13:14:29,452 - llm.gemini_client - INFO - ЁЯдЦ [LangChain OpenAI] Response received
2026-02-03 13:14:29,452 - llm.gemini_client - INFO - тП▒я╕П [LangChain OpenAI] Latency: 6644.45 ms
2026-02-03 13:14:29,452 - llm.gemini_client - ERROR - тЭМ [LangChain OpenAI] JSON Decode Error: Expecting value: line 1 column 1 (char 0)
2026-02-03 13:14:29,452 - llm.gemini_client - ERROR - [LangChain OpenAI] Response content: analysisto respond as the assistant. The system says we must reply in Hindi using Devanagari script only. Use feminine form. Use "рдЖрдк" for address. We have some collected data: identity_confirmed, loan_taken, last_month_payment, etc. The customer says "рдореИрдВ рдЕрдХрд╛рд╢ рдмреЛрд▓ рд░рд╣рд╛ рд╣реВрдВред" They corrected name: earlier we had "рдЖрдХрд╛рд╢ рдкрд╡рд╛рд░" as given. The system gave that as customer name. Now the assistant must respond acknowledging perhaps that they are a male? But it's a correction? Actually "рдореИрдВ рдЕрдХрд╛рд╢ рдмреЛрд▓ рд░рд╣рд╛ рд╣реВрдВ" means "I am Akash speaking" clarifying they are speaking. They might be the customer or a relative. We need to ask identity confirmation: we must ask their name and relation if relative. We have identity_confirmed set to null currently. So we need to ask them to confirm identity: "рдХреГрдкрдпрд╛ рдЕрдкрдирд╛ рдирд╛рдо рдФрд░ рдкрддрд╛ рдмрддрд╛рдПрдВ" or "рдХреГрдкрдпрд╛ рдмрддрд╛рдЗрдП рдХрд┐ рдЖрдкрдХрд╛ рдирд╛рдо рдХреНрдпрд╛ рд╣реИ рдФрд░ рдЖрдк рдЧреНрд░рд╛рд╣рдХ рд╕реЗ рдХрд┐рддрдиреЗ рдирдЬрджреАрдХ рд╣реИрдВ" but we have to ask for name and relation in the first question. The guidelines: "If speaking directly to the customer, proceed normally. If a relative answers, first politely ask the speaker
2026-02-03 13:14:29,452 - services.conversational_flow - INFO - LLM Raw Response: {'value': 'UNCLEAR', 'is_clear': False}
2026-02-03 13:14:29,452 - services.conversational_flow - INFO - Extracted Data from LLM: None
2026-02-03 13:14:29,452 - services.conversational_flow - INFO - Next Action from LLM: None
2026-02-03 13:14:29,452 - services.conversational_flow - INFO - Call End Reason from LLM: None
2026-02-03 13:14:29,452 - services.conversational_flow - INFO - Session (after): {'session_id': 'session_2248e61f_1770104625', 'customer_name': 'рдЖрдХрд╛рд╢ рдкрд╡рд╛рд░', 'customer_name_english': 'AAKASH  PAWAR', 'identity_confirmed': None, 'loan_taken': None, 'last_month_payment': None, 'payee': None, 'payment_date': None, 'payment_mode': None, 'payment_reason': None, 'payment_amount': None, 'conversation_started': True, 'last_bot_response': 'рдХреГрдкрдпрд╛ рджреЛрдмрд╛рд░рд╛ рдмрддрд╛рдЗрдПред', 'identify_confirmation': None, 'availability': None, 'user_contact': None, 'last_month_emi_payment': None, 'payee_name': None, 'payee_contact': None, 'pay_date': None, 'mode_of_payment': None, 'field_executive_name': None, 'field_executive_contact': None, 'reason': None, 'amount': None, 'current_question': 0, 'retry_count': 0, 'call_should_end': False, 'call_end_reason': None, 'phase': 'conversation', 'generated_summary': None, 'summary_confirmed': False, 'product_type': 'рдкрд░реНрд╕рдирд▓ рд▓реЛрди', 'last_conversation_notes': ''}
2026-02-03 13:14:29,452 - core.websocket_handler - INFO - ЁЯУд Answer result: CONTINUE_CONVERSATION
2026-02-03 13:14:29,453 - core.websocket_handler - INFO - ЁЯТм Continuing conversation .
2026-02-03 13:14:29,453 - core.websocket_handler - INFO - ЁЯЧгя╕П TTS playing: рдХреГрдкрдпрд╛ рджреЛрдмрд╛рд░рд╛ рдмрддрд╛рдЗрдПред...
2026-02-03 13:14:29,453 - services.tts_service - INFO - ЁЯО╡ TTS: рдХреГрдкрдпрд╛ рджреЛрдмрд╛рд░рд╛ рдмрддрд╛рдЗрдПред...
2026-02-03 13:14:29,459 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"tts_started"}...
2026-02-03 13:14:29,459 - core.router - INFO - ЁЯЪА Dispatching tts_started event to handler: handle_tts_started
2026-02-03 13:14:29,459 - core.websocket_handler - INFO - ЁЯФЗ Mic disabled for 4491587328 (TTS playing)
2026-02-03 13:14:29,459 - core.router - INFO - тЬЕ Handler handle_tts_started completed successfully
2026-02-03 13:14:32,127 - services.tts_service - INFO - тЬЕ TTS complete: 30 chunks
2026-02-03 13:14:32,128 - core.websocket_handler - INFO - тЬЕ TTS complete: 30 chunks sent
2026-02-03 13:14:32,128 - core.websocket_handler - INFO - тП░ Reset last_user_input_time after TTS for 4491587328
2026-02-03 13:14:32,129 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"tts_finished"}...
2026-02-03 13:14:32,130 - core.router - INFO - ЁЯЪА Dispatching tts_finished event to handler: handle_tts_finished
2026-02-03 13:14:32,130 - core.websocket_handler - INFO - ЁЯОд Mic enabled for 4491587328
2026-02-03 13:14:32,130 - core.router - INFO - тЬЕ Handler handle_tts_finished completed successfully
2026-02-03 13:14:35,042 - services.vad_silero - INFO - ЁЯОд Voice detected! (prob: 1.00)
2026-02-03 13:14:37,001 - services.vad_silero - INFO - ЁЯФЪ Speech ended, sending 77824 bytes to ASR
2026-02-03 13:14:37,002 - core.websocket_handler - INFO - ЁЯФН ASR: Processing audio for 4491587328
2026-02-03 13:14:37,554 - core.websocket_handler - INFO - ЁЯУЭ ASR Transcript: 'I'll check with this white'
2026-02-03 13:14:37,555 - core.websocket_handler - INFO - тП░ Updated last_user_input_time for 4491587328
2026-02-03 13:14:37,555 - core.websocket_handler - INFO - ЁЯУе Processing answer: 'I'll check with this white' for phase=conversation, question=0
2026-02-03 13:14:37,555 - flow.flow_manager - INFO - ЁЯФД Processing conversational response: 'I'll check with this white'
2026-02-03 13:14:37,555 - services.conversational_flow - INFO - ===== New Conversational Turn =====
2026-02-03 13:14:37,555 - services.conversational_flow - INFO - Customer Name: рдЖрдХрд╛рд╢ рдкрд╡рд╛рд░
2026-02-03 13:14:37,556 - services.conversational_flow - INFO - User Input: I'll check with this white
2026-02-03 13:14:37,556 - services.conversational_flow - INFO - Session (before): {'session_id': 'session_2248e61f_1770104625', 'customer_name': 'рдЖрдХрд╛рд╢ рдкрд╡рд╛рд░', 'customer_name_english': 'AAKASH  PAWAR', 'identity_confirmed': None, 'loan_taken': None, 'last_month_payment': None, 'payee': None, 'payment_date': None, 'payment_mode': None, 'payment_reason': None, 'payment_amount': None, 'conversation_started': True, 'last_bot_response': 'рдХреГрдкрдпрд╛ рджреЛрдмрд╛рд░рд╛ рдмрддрд╛рдЗрдПред', 'identify_confirmation': None, 'availability': None, 'user_contact': None, 'last_month_emi_payment': None, 'payee_name': None, 'payee_contact': None, 'pay_date': None, 'mode_of_payment': None, 'field_executive_name': None, 'field_executive_contact': None, 'reason': None, 'amount': None, 'current_question': 0, 'retry_count': 0, 'call_should_end': False, 'call_end_reason': None, 'phase': 'conversation', 'generated_summary': None, 'summary_confirmed': False, 'product_type': 'рдкрд░реНрд╕рдирд▓ рд▓реЛрди', 'last_conversation_notes': ''}
2026-02-03 13:14:37,556 - services.conversational_flow - INFO - Conversation Stage: identity_confirmation
2026-02-03 13:14:37,556 - services.conversational_flow - INFO - Missing Information: ['identity confirmation', 'loan confirmation', 'last month payment confirmation', 'who made payment', 'payment date', 'payment method', 'payment reason', 'payment amount']
2026-02-03 13:14:44,074 - httpx - INFO - HTTP Request: POST http://192.168.30.132:8001/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-03 13:14:44,108 - llm.gemini_client - INFO - ЁЯдЦ [LangChain OpenAI] Response received
2026-02-03 13:14:44,109 - llm.gemini_client - INFO - тП▒я╕П [LangChain OpenAI] Latency: 6552.13 ms
2026-02-03 13:14:44,109 - llm.gemini_client - ERROR - тЭМ [LangChain OpenAI] JSON Decode Error: Expecting value: line 1 column 1 (char 0)
2026-02-03 13:14:44,109 - llm.gemini_client - ERROR - [LangChain OpenAI] Response content: analysisto produce JSON response. The user says: "I'll check with this white". It's unclear. Probably means "I'll check with this person" maybe a relative. They didn't give identity, loan, etc. They are being vague. We need to ask clarifying question: e.g., who is 'white'? And what do they want to confirm? They may want to say they'll check on a name. So we need to ask what the payee is? Actually we need to ask identity (the customer themselves). But conversation stage: identity_confirmation. So we need to ask them to confirm their identity. Also loan taken, last month payment, payee, payment date, mode, reason, amount. They haven't answered anything. They said "I'll check with this white" presumably means "This person is the payee"? Not sure.

Maybe they are referring to the person who gave them the loan? Or "white" as a relative? The phrase is incomplete. We need to ask who "white" is. But we should follow guidelines: don't ask same question twice. We haven't asked identity. So we can ask a new question: "рдХреГрдкрдпрд╛ рдмрддрд╛рдЗрдП рдХрд┐ рдЖрдк рдХрд┐рд╕рдХреЗ рд▓рд┐рдП рднреБрдЧрддрд╛рди рдХрд░ рд░рд╣реЗ рд╣реИрдВ?" or "рдХреНрдпрд╛ рдЖрдк
2026-02-03 13:14:44,109 - services.conversational_flow - INFO - LLM Raw Response: {'value': 'UNCLEAR', 'is_clear': False}
2026-02-03 13:14:44,109 - services.conversational_flow - INFO - Extracted Data from LLM: None
2026-02-03 13:14:44,109 - services.conversational_flow - INFO - Next Action from LLM: None
2026-02-03 13:14:44,109 - services.conversational_flow - INFO - Call End Reason from LLM: None
2026-02-03 13:14:44,109 - services.conversational_flow - INFO - Session (after): {'session_id': 'session_2248e61f_1770104625', 'customer_name': 'рдЖрдХрд╛рд╢ рдкрд╡рд╛рд░', 'customer_name_english': 'AAKASH  PAWAR', 'identity_confirmed': None, 'loan_taken': None, 'last_month_payment': None, 'payee': None, 'payment_date': None, 'payment_mode': None, 'payment_reason': None, 'payment_amount': None, 'conversation_started': True, 'last_bot_response': 'рдХреГрдкрдпрд╛ рджреЛрдмрд╛рд░рд╛ рдмрддрд╛рдЗрдПред', 'identify_confirmation': None, 'availability': None, 'user_contact': None, 'last_month_emi_payment': None, 'payee_name': None, 'payee_contact': None, 'pay_date': None, 'mode_of_payment': None, 'field_executive_name': None, 'field_executive_contact': None, 'reason': None, 'amount': None, 'current_question': 0, 'retry_count': 0, 'call_should_end': False, 'call_end_reason': None, 'phase': 'conversation', 'generated_summary': None, 'summary_confirmed': False, 'product_type': 'рдкрд░реНрд╕рдирд▓ рд▓реЛрди', 'last_conversation_notes': ''}
2026-02-03 13:14:44,109 - core.websocket_handler - INFO - ЁЯУд Answer result: CONTINUE_CONVERSATION
2026-02-03 13:14:44,109 - core.websocket_handler - INFO - ЁЯТм Continuing conversation .
2026-02-03 13:14:44,110 - core.websocket_handler - INFO - ЁЯЧгя╕П TTS playing: рдХреГрдкрдпрд╛ рджреЛрдмрд╛рд░рд╛ рдмрддрд╛рдЗрдПред...
2026-02-03 13:14:44,110 - services.tts_service - INFO - ЁЯО╡ TTS: рдХреГрдкрдпрд╛ рджреЛрдмрд╛рд░рд╛ рдмрддрд╛рдЗрдПред...
2026-02-03 13:14:44,116 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"tts_started"}...
2026-02-03 13:14:44,116 - core.router - INFO - ЁЯЪА Dispatching tts_started event to handler: handle_tts_started
2026-02-03 13:14:44,116 - core.websocket_handler - INFO - ЁЯФЗ Mic disabled for 4491587328 (TTS playing)
2026-02-03 13:14:44,116 - core.router - INFO - тЬЕ Handler handle_tts_started completed successfully
2026-02-03 13:14:46,370 - services.tts_service - INFO - тЬЕ TTS complete: 20 chunks
2026-02-03 13:14:46,371 - core.websocket_handler - INFO - тЬЕ TTS complete: 20 chunks sent
2026-02-03 13:14:46,371 - core.websocket_handler - INFO - тП░ Reset last_user_input_time after TTS for 4491587328
2026-02-03 13:14:46,372 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"tts_finished"}...
2026-02-03 13:14:46,373 - core.router - INFO - ЁЯЪА Dispatching tts_finished event to handler: handle_tts_finished
2026-02-03 13:14:46,373 - core.websocket_handler - INFO - ЁЯОд Mic enabled for 4491587328
2026-02-03 13:14:46,373 - core.router - INFO - тЬЕ Handler handle_tts_finished completed successfully
2026-02-03 13:14:46,883 - services.vad_silero - INFO - ЁЯОд Voice detected! (prob: 1.00)
2026-02-03 13:14:48,356 - core.websocket_handler - ERROR - Error in WebSocket loop: Cannot call "receive" once a disconnect message has been received.
2026-02-03 13:21:28,386 - llm.gemini_client - INFO - тЬЕ OpenAI client (Hugging Face Router) initialized successfully
2026-02-03 13:21:29,464 - core.router - INFO - тЬЕ Registered handler for event type: init_session -> handle_init_session
2026-02-03 13:21:29,464 - core.router - INFO - тЬЕ Registered handler for event type: tts_finished -> handle_tts_finished
2026-02-03 13:21:29,464 - core.router - INFO - тЬЕ Registered handler for event type: tts_started -> handle_tts_started
2026-02-03 13:21:29,464 - core.router - INFO - тЬЕ Registered handler for event type: tts_request -> handle_tts_request
2026-02-03 13:21:29,464 - core.router - INFO - тЬЕ Registered handler for event type: ping -> handle_ping
2026-02-03 13:21:41,160 - llm.gemini_client - INFO - тЬЕ OpenAI client (Hugging Face Router) initialized successfully
2026-02-03 13:21:42,099 - core.router - INFO - тЬЕ Registered handler for event type: init_session -> handle_init_session
2026-02-03 13:21:42,099 - core.router - INFO - тЬЕ Registered handler for event type: tts_finished -> handle_tts_finished
2026-02-03 13:21:42,099 - core.router - INFO - тЬЕ Registered handler for event type: tts_started -> handle_tts_started
2026-02-03 13:21:42,099 - core.router - INFO - тЬЕ Registered handler for event type: tts_request -> handle_tts_request
2026-02-03 13:21:42,099 - core.router - INFO - тЬЕ Registered handler for event type: ping -> handle_ping
2026-02-03 13:22:00,283 - llm.gemini_client - INFO - тЬЕ OpenAI client (Hugging Face Router) initialized successfully
2026-02-03 13:22:01,197 - core.router - INFO - тЬЕ Registered handler for event type: init_session -> handle_init_session
2026-02-03 13:22:01,197 - core.router - INFO - тЬЕ Registered handler for event type: tts_finished -> handle_tts_finished
2026-02-03 13:22:01,197 - core.router - INFO - тЬЕ Registered handler for event type: tts_started -> handle_tts_started
2026-02-03 13:22:01,197 - core.router - INFO - тЬЕ Registered handler for event type: tts_request -> handle_tts_request
2026-02-03 13:22:01,197 - core.router - INFO - тЬЕ Registered handler for event type: ping -> handle_ping
2026-02-03 13:22:06,478 - services.summary_service - INFO - ================================================================================
2026-02-03 13:22:06,478 - services.summary_service - INFO - ЁЯдЦ LLM CALL (transliterate_to_devanagari) - Input:
2026-02-03 13:22:06,478 - services.summary_service - INFO - Name: AAKASH  .
2026-02-03 13:22:06,478 - services.summary_service - INFO - --------------------------------------------------------------------------------
2026-02-03 13:22:07,155 - httpx - INFO - HTTP Request: POST https://router.huggingface.co/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-03 13:22:07,165 - llm.gemini_client - INFO - ЁЯдЦ [OpenAI HF] Response received
2026-02-03 13:22:07,165 - llm.gemini_client - INFO - тП▒я╕П [OpenAI HF] Latency: 687.03 ms
2026-02-03 13:22:07,165 - llm.gemini_client - INFO - ЁЯОп [OpenAI HF usage] input_tokens=237, output_tokens=76, total_tokens=313
2026-02-03 13:22:07,166 - llm.gemini_client - INFO - тЬЕ [LangChain OpenAI] Response processed successfully - Latency: 687.03ms, Tokens: 313
2026-02-03 13:22:07,166 - services.summary_service - INFO - ЁЯУе LLM CALL (transliterate_to_devanagari) - Response:
2026-02-03 13:22:07,166 - services.summary_service - INFO - Devanagari Name: рдЖрдХрд╛рд╢
2026-02-03 13:22:07,166 - services.summary_service - INFO - --------------------------------------------------------------------------------
2026-02-03 13:22:07,166 - services.summary_service - INFO - тЬЕ LLM CALL (transliterate_to_devanagari) - Result: рдЖрдХрд╛рд╢
2026-02-03 13:22:07,166 - services.summary_service - INFO - ================================================================================
2026-02-03 13:22:07,835 - utils.session_data_storage - INFO - ЁЯТ╛ Saved DB data for session: session_e6d2ea0b_1770105126
2026-02-03 13:22:08,615 - httpx - INFO - HTTP Request: POST https://router.huggingface.co/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-03 13:22:08,617 - llm.gemini_client - INFO - ЁЯдЦ [OpenAI HF] Response received
2026-02-03 13:22:08,617 - llm.gemini_client - INFO - тП▒я╕П [OpenAI HF] Latency: 781.09 ms
2026-02-03 13:22:08,617 - llm.gemini_client - INFO - ЁЯОп [OpenAI HF usage] input_tokens=271, output_tokens=454, total_tokens=725
2026-02-03 13:22:08,617 - llm.gemini_client - INFO - тЬЕ [LangChain OpenAI] Response processed successfully - Latency: 781.09ms, Tokens: 725
2026-02-03 13:22:08,626 - core.websocket_handler - INFO - ЁЯФМ WebSocket connection attempt received
2026-02-03 13:22:08,626 - core.websocket_handler - INFO - тЬЕ WebSocket accepted
2026-02-03 13:22:08,626 - core.websocket_handler - INFO - ЁЯУЭ WebSocket ID assigned: 5016739984
2026-02-03 13:22:08,626 - core.websocket_handler - INFO - ЁЯУК Connection state initialized for 5016739984
2026-02-03 13:22:08,626 - core.websocket_handler - INFO - тЬЕ WebSocket connected: 5016739984
2026-02-03 13:22:08,626 - core.websocket_handler - INFO - ЁЯЪА Starting background tasks for 5016739984
2026-02-03 13:22:08,627 - core.websocket_handler - INFO - тЬЕ Background tasks started for 5016739984
2026-02-03 13:22:08,628 - core.websocket_handler - INFO - ЁЯУд Sent websocket_ready message to client
2026-02-03 13:22:08,731 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"init_session","session_id":"session_e6d2ea0b_1770105126","customer_name":"AAKASH  ."}...
2026-02-03 13:22:08,731 - core.router - INFO - ЁЯЪА Dispatching init_session event to handler: handle_init_session
2026-02-03 13:22:08,731 - core.websocket_handler - INFO - ЁЯУЮ Outbound call to: AAKASH  . (session: session_e6d2ea0b_1770105126)
2026-02-03 13:22:09,381 - httpx - INFO - HTTP Request: POST https://router.huggingface.co/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-03 13:22:09,382 - llm.gemini_client - INFO - ЁЯдЦ [OpenAI HF] Response received
2026-02-03 13:22:09,382 - llm.gemini_client - INFO - тП▒я╕П [OpenAI HF] Latency: 650.29 ms
2026-02-03 13:22:09,382 - llm.gemini_client - INFO - ЁЯОп [OpenAI HF usage] input_tokens=271, output_tokens=297, total_tokens=568
2026-02-03 13:22:09,382 - llm.gemini_client - INFO - тЬЕ [LangChain OpenAI] Response processed successfully - Latency: 650.29ms, Tokens: 568
2026-02-03 13:22:09,382 - core.websocket_handler - INFO - ЁЯУЛ Sending first question: рдирдорд╕реНрддреЗ, рдореИрдВ рдПрд▓ рдПрдВрдб рдЯреА рдлрд╛рдЗрдиреЗрдВрд╕ рдХреА рддрд░рдлрд╝ рд╕реЗ рдмрд╛рдд рдХрд░ рд░рд╣реА рд╣реВрдБ, рдХреНрдпрд╛ рдореЗрд░реА рдмрд╛рдд рдЖрдХрд╛рд╢ рдЬреА рд╕реЗ рд╣реЛ рд░рд╣реА рд╣реИ?
2026-02-03 13:22:09,382 - core.router - INFO - тЬЕ Handler handle_init_session completed successfully
2026-02-03 13:22:09,383 - core.websocket_handler - INFO - ЁЯЧгя╕П TTS playing: рдирдорд╕реНрддреЗ, рдореИрдВ рдПрд▓ рдПрдВрдб рдЯреА рдлрд╛рдЗрдиреЗрдВрд╕ рдХреА рддрд░рдлрд╝ рд╕реЗ рдмрд╛рдд рдХрд░ рд░рд╣...
2026-02-03 13:22:09,383 - services.tts_service - INFO - ЁЯО╡ TTS: рдирдорд╕реНрддреЗ, рдореИрдВ рдПрд▓ рдПрдВрдб рдЯреА рдлрд╛рдЗрдиреЗрдВрд╕ рдХреА рддрд░рдлрд╝ рд╕реЗ рдмрд╛рдд рдХрд░ рд░рд╣...
2026-02-03 13:22:09,390 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"tts_started"}...
2026-02-03 13:22:09,390 - core.router - INFO - ЁЯЪА Dispatching tts_started event to handler: handle_tts_started
2026-02-03 13:22:09,390 - core.websocket_handler - INFO - ЁЯФЗ Mic disabled for 5016739984 (TTS playing)
2026-02-03 13:22:09,390 - core.router - INFO - тЬЕ Handler handle_tts_started completed successfully
2026-02-03 13:22:16,027 - services.tts_service - INFO - тЬЕ TTS complete: 60 chunks
2026-02-03 13:22:16,029 - core.websocket_handler - INFO - тЬЕ TTS complete: 60 chunks sent
2026-02-03 13:22:16,029 - core.websocket_handler - INFO - тП░ Reset last_user_input_time after TTS for 5016739984
2026-02-03 13:22:16,031 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"tts_finished"}...
2026-02-03 13:22:16,031 - core.router - INFO - ЁЯЪА Dispatching tts_finished event to handler: handle_tts_finished
2026-02-03 13:22:16,031 - core.websocket_handler - INFO - ЁЯОд Mic enabled for 5016739984
2026-02-03 13:22:16,031 - core.router - INFO - тЬЕ Handler handle_tts_finished completed successfully
2026-02-03 13:22:17,723 - services.vad_silero - INFO - ЁЯОд Voice detected! (prob: 0.94)
2026-02-03 13:22:19,860 - services.vad_silero - INFO - ЁЯФЪ Speech ended, sending 83968 bytes to ASR
2026-02-03 13:22:19,861 - core.websocket_handler - INFO - ЁЯФН ASR: Processing audio for 5016739984
2026-02-03 13:22:20,861 - core.websocket_handler - INFO - ЁЯУЭ ASR Transcript: 'рд╣рд╛рдБ рдореИрдВ рдЖрдХрд╛рд╢ рдкрд╛рдд рдХрд░ рд░рд╣реВрдВред'
2026-02-03 13:22:20,862 - core.websocket_handler - INFO - тП░ Updated last_user_input_time for 5016739984
2026-02-03 13:22:20,862 - core.websocket_handler - INFO - ЁЯУе Processing answer: 'рд╣рд╛рдБ рдореИрдВ рдЖрдХрд╛рд╢ рдкрд╛рдд рдХрд░ рд░рд╣реВрдВред' for phase=conversation, question=0
2026-02-03 13:22:20,862 - flow.flow_manager - INFO - ЁЯФД Processing conversational response: 'рд╣рд╛рдБ рдореИрдВ рдЖрдХрд╛рд╢ рдкрд╛рдд рдХрд░ рд░рд╣реВрдВред'
2026-02-03 13:22:20,862 - services.conversational_flow - INFO - ===== New Conversational Turn =====
2026-02-03 13:22:20,862 - services.conversational_flow - INFO - Customer Name: рдЖрдХрд╛рд╢
2026-02-03 13:22:20,862 - services.conversational_flow - INFO - User Input: рд╣рд╛рдБ рдореИрдВ рдЖрдХрд╛рд╢ рдкрд╛рдд рдХрд░ рд░рд╣реВрдВред
2026-02-03 13:22:20,862 - services.conversational_flow - INFO - Session (before): {'session_id': 'session_e6d2ea0b_1770105126', 'customer_name': 'рдЖрдХрд╛рд╢', 'customer_name_english': 'AAKASH  .', 'identity_confirmed': None, 'loan_taken': None, 'last_month_payment': None, 'payee': None, 'payment_date': None, 'payment_mode': None, 'payment_reason': None, 'payment_amount': None, 'conversation_started': True, 'last_bot_response': None, 'identify_confirmation': None, 'availability': None, 'user_contact': None, 'last_month_emi_payment': None, 'payee_name': None, 'payee_contact': None, 'pay_date': None, 'mode_of_payment': None, 'field_executive_name': None, 'field_executive_contact': None, 'reason': None, 'amount': None, 'current_question': 0, 'retry_count': 0, 'call_should_end': False, 'call_end_reason': None, 'phase': 'conversation', 'generated_summary': None, 'summary_confirmed': False, 'product_type': 'рдкрд░реНрд╕рдирд▓ рд▓реЛрди'}
2026-02-03 13:22:20,863 - services.conversational_flow - INFO - Conversation Stage: identity_confirmation
2026-02-03 13:22:20,863 - services.conversational_flow - INFO - Missing Information: ['identity confirmation', 'loan confirmation', 'last month payment confirmation', 'who made payment', 'payment date', 'payment method', 'payment reason', 'payment amount']
2026-02-03 13:22:22,047 - httpx - INFO - HTTP Request: POST https://router.huggingface.co/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-03 13:22:22,048 - llm.gemini_client - INFO - ЁЯдЦ [OpenAI HF] Response received
2026-02-03 13:22:22,048 - llm.gemini_client - INFO - тП▒я╕П [OpenAI HF] Latency: 1185.33 ms
2026-02-03 13:22:22,048 - llm.gemini_client - INFO - ЁЯОп [OpenAI HF usage] input_tokens=2946, output_tokens=554, total_tokens=3500
2026-02-03 13:22:22,049 - llm.gemini_client - INFO - тЬЕ [LangChain OpenAI] Response processed successfully - Latency: 1185.33ms, Tokens: 3500
2026-02-03 13:22:22,049 - services.conversational_flow - INFO - LLM Raw Response: {'bot_response': 'рд╕рдордЭ рдЧрдИ, рдХреНрдпрд╛ рдЖрдкрдиреЗ рдЕрднреА рддрдХ рдХреЛрдИ рдЛрдг рд▓рд┐рдпрд╛ рд╣реИ?', 'extracted_data': {'identity_confirmed': 'YES', 'speaker_name': None, 'speaker_relation': None, 'loan_taken': None, 'last_month_payment': None, 'payee': None, 'payee_name': None, 'payee_contact': None, 'payment_date': None, 'payment_mode': None, 'field_executive_name': None, 'field_executive_contact': None, 'payment_reason': None, 'payment_amount': None}, 'next_action': 'continue', 'provide_summary': False, 'missing_info': ['loan confirmation', 'last month payment confirmation', 'who made payment', 'payment date', 'payment method', 'payment reason', 'payment amount'], 'call_end_reason': 'null', 'conversation_notes': 'рдЧреНрд░рд╛рд╣рдХ рдиреЗ рдкрд╣рдЪрд╛рди рдХреА рдкреБрд╖реНрдЯрд┐ рдХреАред', '_input_tokens': 2946, '_output_tokens': 554, '_total_tokens': 3500, '_latency_ms': 1185.33, '_model': 'openai/gpt-oss-20b:groq'}
2026-02-03 13:22:22,049 - services.conversational_flow - INFO - Extracted Data from LLM: {'identity_confirmed': 'YES', 'speaker_name': None, 'speaker_relation': None, 'loan_taken': None, 'last_month_payment': None, 'payee': None, 'payee_name': None, 'payee_contact': None, 'payment_date': None, 'payment_mode': None, 'field_executive_name': None, 'field_executive_contact': None, 'payment_reason': None, 'payment_amount': None}
2026-02-03 13:22:22,049 - services.conversational_flow - INFO - Next Action from LLM: continue
2026-02-03 13:22:22,049 - services.conversational_flow - INFO - Call End Reason from LLM: null
2026-02-03 13:22:22,049 - services.conversational_flow - INFO - Session (after): {'session_id': 'session_e6d2ea0b_1770105126', 'customer_name': 'рдЖрдХрд╛рд╢', 'customer_name_english': 'AAKASH  .', 'identity_confirmed': 'YES', 'loan_taken': None, 'last_month_payment': None, 'payee': None, 'payment_date': None, 'payment_mode': None, 'payment_reason': None, 'payment_amount': None, 'conversation_started': True, 'last_bot_response': None, 'identify_confirmation': None, 'availability': None, 'user_contact': None, 'last_month_emi_payment': None, 'payee_name': None, 'payee_contact': None, 'pay_date': None, 'mode_of_payment': None, 'field_executive_name': None, 'field_executive_contact': None, 'reason': None, 'amount': None, 'current_question': 0, 'retry_count': 0, 'call_should_end': False, 'call_end_reason': None, 'phase': 'conversation', 'generated_summary': None, 'summary_confirmed': False, 'product_type': 'рдкрд░реНрд╕рдирд▓ рд▓реЛрди'}
2026-02-03 13:22:22,049 - core.websocket_handler - INFO - ЁЯУд Answer result: CONTINUE_CONVERSATION
2026-02-03 13:22:22,049 - core.websocket_handler - INFO - ЁЯТм Continuing conversation .
2026-02-03 13:22:22,050 - core.websocket_handler - INFO - ЁЯЧгя╕П TTS playing: рд╕рдордЭ рдЧрдИ, рдХреНрдпрд╛ рдЖрдкрдиреЗ рдЕрднреА рддрдХ рдХреЛрдИ рдЛрдг рд▓рд┐рдпрд╛ рд╣реИ?...
2026-02-03 13:22:22,050 - services.tts_service - INFO - ЁЯО╡ TTS: рд╕рдордЭ рдЧрдИ, рдХреНрдпрд╛ рдЖрдкрдиреЗ рдЕрднреА рддрдХ рдХреЛрдИ рдЛрдг рд▓рд┐рдпрд╛ рд╣реИ?...
2026-02-03 13:22:22,057 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"tts_started"}...
2026-02-03 13:22:22,057 - core.router - INFO - ЁЯЪА Dispatching tts_started event to handler: handle_tts_started
2026-02-03 13:22:22,058 - core.websocket_handler - INFO - ЁЯФЗ Mic disabled for 5016739984 (TTS playing)
2026-02-03 13:22:22,058 - core.router - INFO - тЬЕ Handler handle_tts_started completed successfully
2026-02-03 13:22:25,656 - services.tts_service - INFO - тЬЕ TTS complete: 29 chunks
2026-02-03 13:22:25,657 - core.websocket_handler - INFO - тЬЕ TTS complete: 29 chunks sent
2026-02-03 13:22:25,657 - core.websocket_handler - INFO - тП░ Reset last_user_input_time after TTS for 5016739984
2026-02-03 13:22:25,659 - services.google_sheet_logger - WARNING - Google Sheet creds not found at /Users/snehakiranmanded/LTFS_Conversational_Flow/backend/google_sheet_creds.json - sheet logging disabled
2026-02-03 13:22:25,659 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"tts_finished"}...
2026-02-03 13:22:25,660 - core.router - INFO - ЁЯЪА Dispatching tts_finished event to handler: handle_tts_finished
2026-02-03 13:22:25,660 - core.websocket_handler - INFO - ЁЯОд Mic enabled for 5016739984
2026-02-03 13:22:25,660 - core.router - INFO - тЬЕ Handler handle_tts_finished completed successfully
2026-02-03 13:22:26,859 - services.vad_silero - INFO - ЁЯОд Voice detected! (prob: 0.99)
2026-02-03 13:22:28,618 - services.vad_silero - INFO - ЁЯФЪ Speech ended, sending 71680 bytes to ASR
2026-02-03 13:22:28,618 - core.websocket_handler - INFO - ЁЯФН ASR: Processing audio for 5016739984
2026-02-03 13:22:29,399 - core.websocket_handler - INFO - ЁЯУЭ ASR Transcript: 'рд╣рд╛рдБ рдореИрдВрдиреЗ рд▓рд┐рдпрд╛ рд╣реИред'
2026-02-03 13:22:29,399 - core.websocket_handler - INFO - тП░ Updated last_user_input_time for 5016739984
2026-02-03 13:22:29,400 - core.websocket_handler - INFO - ЁЯУе Processing answer: 'рд╣рд╛рдБ рдореИрдВрдиреЗ рд▓рд┐рдпрд╛ рд╣реИред' for phase=conversation, question=0
2026-02-03 13:22:29,400 - flow.flow_manager - INFO - ЁЯФД Processing conversational response: 'рд╣рд╛рдБ рдореИрдВрдиреЗ рд▓рд┐рдпрд╛ рд╣реИред'
2026-02-03 13:22:29,400 - services.conversational_flow - INFO - ===== New Conversational Turn =====
2026-02-03 13:22:29,400 - services.conversational_flow - INFO - Customer Name: рдЖрдХрд╛рд╢
2026-02-03 13:22:29,400 - services.conversational_flow - INFO - User Input: рд╣рд╛рдБ рдореИрдВрдиреЗ рд▓рд┐рдпрд╛ рд╣реИред
2026-02-03 13:22:29,400 - services.conversational_flow - INFO - Session (before): {'session_id': 'session_e6d2ea0b_1770105126', 'customer_name': 'рдЖрдХрд╛рд╢', 'customer_name_english': 'AAKASH  .', 'identity_confirmed': 'YES', 'loan_taken': None, 'last_month_payment': None, 'payee': None, 'payment_date': None, 'payment_mode': None, 'payment_reason': None, 'payment_amount': None, 'conversation_started': True, 'last_bot_response': 'рд╕рдордЭ рдЧрдИ, рдХреНрдпрд╛ рдЖрдкрдиреЗ рдЕрднреА рддрдХ рдХреЛрдИ рдЛрдг рд▓рд┐рдпрд╛ рд╣реИ?', 'identify_confirmation': None, 'availability': None, 'user_contact': None, 'last_month_emi_payment': None, 'payee_name': None, 'payee_contact': None, 'pay_date': None, 'mode_of_payment': None, 'field_executive_name': None, 'field_executive_contact': None, 'reason': None, 'amount': None, 'current_question': 0, 'retry_count': 0, 'call_should_end': False, 'call_end_reason': None, 'phase': 'conversation', 'generated_summary': None, 'summary_confirmed': False, 'product_type': 'рдкрд░реНрд╕рдирд▓ рд▓реЛрди', 'last_conversation_notes': 'рдЧреНрд░рд╛рд╣рдХ рдиреЗ рдкрд╣рдЪрд╛рди рдХреА рдкреБрд╖реНрдЯрд┐ рдХреАред'}
2026-02-03 13:22:29,401 - services.conversational_flow - INFO - Conversation Stage: loan_confirmation
2026-02-03 13:22:29,401 - services.conversational_flow - INFO - Missing Information: ['loan confirmation', 'last month payment confirmation', 'who made payment', 'payment date', 'payment method', 'payment reason', 'payment amount']
2026-02-03 13:22:30,469 - httpx - INFO - HTTP Request: POST https://router.huggingface.co/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-03 13:22:30,472 - llm.gemini_client - INFO - ЁЯдЦ [OpenAI HF] Response received
2026-02-03 13:22:30,472 - llm.gemini_client - INFO - тП▒я╕П [OpenAI HF] Latency: 1071.14 ms
2026-02-03 13:22:30,472 - llm.gemini_client - INFO - ЁЯОп [OpenAI HF usage] input_tokens=2949, output_tokens=457, total_tokens=3406
2026-02-03 13:22:30,473 - llm.gemini_client - INFO - тЬЕ [LangChain OpenAI] Response processed successfully - Latency: 1071.14ms, Tokens: 3406
2026-02-03 13:22:30,473 - services.conversational_flow - INFO - LLM Raw Response: {'bot_response': 'рдареАрдХ рд╣реИ, рдХреНрдпрд╛ рдЖрдкрдиреЗ рдкрд┐рдЫрд▓реЗ рдорд╣реАрдиреЗ рдХреЛрдИ рднреБрдЧрддрд╛рди рдХрд┐рдпрд╛ рд╣реИ?', 'extracted_data': {'identity_confirmed': 'YES', 'speaker_name': None, 'speaker_relation': None, 'loan_taken': 'YES', 'last_month_payment': None, 'payee': None, 'payee_name': None, 'payee_contact': None, 'payment_date': None, 'payment_mode': None, 'field_executive_name': None, 'field_executive_contact': None, 'payment_reason': None, 'payment_amount': None}, 'next_action': 'continue', 'provide_summary': False, 'missing_info': [], 'call_end_reason': 'null', 'conversation_notes': 'рдЧреНрд░рд╛рд╣рдХ рдиреЗ рдЛрдг рд▓рд┐рдпрд╛ рд╣реИ рдХреА рдкреБрд╖реНрдЯрд┐ рдХреА', '_input_tokens': 2949, '_output_tokens': 457, '_total_tokens': 3406, '_latency_ms': 1071.14, '_model': 'openai/gpt-oss-20b:groq'}
2026-02-03 13:22:30,473 - services.conversational_flow - INFO - Extracted Data from LLM: {'identity_confirmed': 'YES', 'speaker_name': None, 'speaker_relation': None, 'loan_taken': 'YES', 'last_month_payment': None, 'payee': None, 'payee_name': None, 'payee_contact': None, 'payment_date': None, 'payment_mode': None, 'field_executive_name': None, 'field_executive_contact': None, 'payment_reason': None, 'payment_amount': None}
2026-02-03 13:22:30,473 - services.conversational_flow - INFO - Next Action from LLM: continue
2026-02-03 13:22:30,473 - services.conversational_flow - INFO - Call End Reason from LLM: null
2026-02-03 13:22:30,473 - services.conversational_flow - INFO - Session (after): {'session_id': 'session_e6d2ea0b_1770105126', 'customer_name': 'рдЖрдХрд╛рд╢', 'customer_name_english': 'AAKASH  .', 'identity_confirmed': 'YES', 'loan_taken': 'YES', 'last_month_payment': None, 'payee': None, 'payment_date': None, 'payment_mode': None, 'payment_reason': None, 'payment_amount': None, 'conversation_started': True, 'last_bot_response': 'рд╕рдордЭ рдЧрдИ, рдХреНрдпрд╛ рдЖрдкрдиреЗ рдЕрднреА рддрдХ рдХреЛрдИ рдЛрдг рд▓рд┐рдпрд╛ рд╣реИ?', 'identify_confirmation': None, 'availability': None, 'user_contact': None, 'last_month_emi_payment': None, 'payee_name': None, 'payee_contact': None, 'pay_date': None, 'mode_of_payment': None, 'field_executive_name': None, 'field_executive_contact': None, 'reason': None, 'amount': None, 'current_question': 0, 'retry_count': 0, 'call_should_end': False, 'call_end_reason': None, 'phase': 'conversation', 'generated_summary': None, 'summary_confirmed': False, 'product_type': 'рдкрд░реНрд╕рдирд▓ рд▓реЛрди', 'last_conversation_notes': 'рдЧреНрд░рд╛рд╣рдХ рдиреЗ рдкрд╣рдЪрд╛рди рдХреА рдкреБрд╖реНрдЯрд┐ рдХреАред'}
2026-02-03 13:22:30,473 - core.websocket_handler - INFO - ЁЯУд Answer result: CONTINUE_CONVERSATION
2026-02-03 13:22:30,473 - core.websocket_handler - INFO - ЁЯТм Continuing conversation .
2026-02-03 13:22:30,474 - core.websocket_handler - INFO - ЁЯЧгя╕П TTS playing: рдареАрдХ рд╣реИ, рдХреНрдпрд╛ рдЖрдкрдиреЗ рдкрд┐рдЫрд▓реЗ рдорд╣реАрдиреЗ рдХреЛрдИ рднреБрдЧрддрд╛рди рдХрд┐рдпрд╛ рд╣реИ?...
2026-02-03 13:22:30,475 - services.tts_service - INFO - ЁЯО╡ TTS: рдареАрдХ рд╣реИ, рдХреНрдпрд╛ рдЖрдкрдиреЗ рдкрд┐рдЫрд▓реЗ рдорд╣реАрдиреЗ рдХреЛрдИ рднреБрдЧрддрд╛рди рдХрд┐рдпрд╛ рд╣реИ?...
2026-02-03 13:22:30,481 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"tts_started"}...
2026-02-03 13:22:30,481 - core.router - INFO - ЁЯЪА Dispatching tts_started event to handler: handle_tts_started
2026-02-03 13:22:30,482 - core.websocket_handler - INFO - ЁЯФЗ Mic disabled for 5016739984 (TTS playing)
2026-02-03 13:22:30,482 - core.router - INFO - тЬЕ Handler handle_tts_started completed successfully
2026-02-03 13:22:34,360 - services.tts_service - INFO - тЬЕ TTS complete: 42 chunks
2026-02-03 13:22:34,361 - core.websocket_handler - INFO - тЬЕ TTS complete: 42 chunks sent
2026-02-03 13:22:34,361 - core.websocket_handler - INFO - тП░ Reset last_user_input_time after TTS for 5016739984
2026-02-03 13:22:34,362 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"tts_finished"}...
2026-02-03 13:22:34,362 - core.router - INFO - ЁЯЪА Dispatching tts_finished event to handler: handle_tts_finished
2026-02-03 13:22:34,362 - core.websocket_handler - INFO - ЁЯОд Mic enabled for 5016739984
2026-02-03 13:22:34,363 - core.router - INFO - тЬЕ Handler handle_tts_finished completed successfully
2026-02-03 13:22:35,004 - services.vad_silero - INFO - ЁЯОд Voice detected! (prob: 1.00)
2026-02-03 13:22:38,821 - services.vad_silero - INFO - ЁЯФЪ Speech ended, sending 137216 bytes to ASR
2026-02-03 13:22:38,821 - core.websocket_handler - INFO - ЁЯФН ASR: Processing audio for 5016739984
2026-02-03 13:22:40,064 - core.websocket_handler - INFO - ЁЯУЭ ASR Transcript: 'рд╣рд╛рдБ рдореИрдВрдиреЗ рдЬрдиреЗрд╡рд░реЗ 30 рдХреЛ 2000 рд░реВрдкреЗ рджрд┐рдпреЗ рдереЗред'
2026-02-03 13:22:40,064 - core.websocket_handler - INFO - тП░ Updated last_user_input_time for 5016739984
2026-02-03 13:22:40,064 - core.websocket_handler - INFO - ЁЯУе Processing answer: 'рд╣рд╛рдБ рдореИрдВрдиреЗ рдЬрдиреЗрд╡рд░реЗ 30 рдХреЛ 2000 рд░реВрдкреЗ рджрд┐рдпреЗ рдереЗред' for phase=conversation, question=0
2026-02-03 13:22:40,065 - flow.flow_manager - INFO - ЁЯФД Processing conversational response: 'рд╣рд╛рдБ рдореИрдВрдиреЗ рдЬрдиреЗрд╡рд░реЗ 30 рдХреЛ 2000 рд░реВрдкреЗ рджрд┐рдпреЗ рдереЗред'
2026-02-03 13:22:40,065 - services.conversational_flow - INFO - ===== New Conversational Turn =====
2026-02-03 13:22:40,065 - services.conversational_flow - INFO - Customer Name: рдЖрдХрд╛рд╢
2026-02-03 13:22:40,065 - services.conversational_flow - INFO - User Input: рд╣рд╛рдБ рдореИрдВрдиреЗ рдЬрдиреЗрд╡рд░реЗ 30 рдХреЛ 2000 рд░реВрдкреЗ рджрд┐рдпреЗ рдереЗред
2026-02-03 13:22:40,065 - services.conversational_flow - INFO - Session (before): {'session_id': 'session_e6d2ea0b_1770105126', 'customer_name': 'рдЖрдХрд╛рд╢', 'customer_name_english': 'AAKASH  .', 'identity_confirmed': 'YES', 'loan_taken': 'YES', 'last_month_payment': None, 'payee': None, 'payment_date': None, 'payment_mode': None, 'payment_reason': None, 'payment_amount': None, 'conversation_started': True, 'last_bot_response': 'рдареАрдХ рд╣реИ, рдХреНрдпрд╛ рдЖрдкрдиреЗ рдкрд┐рдЫрд▓реЗ рдорд╣реАрдиреЗ рдХреЛрдИ рднреБрдЧрддрд╛рди рдХрд┐рдпрд╛ рд╣реИ?', 'identify_confirmation': None, 'availability': None, 'user_contact': None, 'last_month_emi_payment': None, 'payee_name': None, 'payee_contact': None, 'pay_date': None, 'mode_of_payment': None, 'field_executive_name': None, 'field_executive_contact': None, 'reason': None, 'amount': None, 'current_question': 0, 'retry_count': 0, 'call_should_end': False, 'call_end_reason': None, 'phase': 'conversation', 'generated_summary': None, 'summary_confirmed': False, 'product_type': 'рдкрд░реНрд╕рдирд▓ рд▓реЛрди', 'last_conversation_notes': 'рдЧреНрд░рд╛рд╣рдХ рдиреЗ рдЛрдг рд▓рд┐рдпрд╛ рд╣реИ рдХреА рдкреБрд╖реНрдЯрд┐ рдХреА'}
2026-02-03 13:22:40,065 - services.conversational_flow - INFO - Conversation Stage: payment_confirmation
2026-02-03 13:22:40,066 - services.conversational_flow - INFO - Missing Information: ['last month payment confirmation', 'who made payment', 'payment date', 'payment method', 'payment reason', 'payment amount']
2026-02-03 13:22:41,734 - httpx - INFO - HTTP Request: POST https://router.huggingface.co/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-03 13:22:41,736 - llm.gemini_client - INFO - ЁЯдЦ [OpenAI HF] Response received
2026-02-03 13:22:41,736 - llm.gemini_client - INFO - тП▒я╕П [OpenAI HF] Latency: 1670.38 ms
2026-02-03 13:22:41,736 - llm.gemini_client - INFO - ЁЯОп [OpenAI HF usage] input_tokens=2958, output_tokens=859, total_tokens=3817
2026-02-03 13:22:41,737 - llm.gemini_client - INFO - тЬЕ [LangChain OpenAI] Response processed successfully - Latency: 1670.38ms, Tokens: 3817
2026-02-03 13:22:41,737 - services.conversational_flow - INFO - LLM Raw Response: {'bot_response': 'рдареАрдХ рд╣реИ, рдЖрдкрдиреЗ 30/01/2025 рдХреЛ 2000 рд░реБрдкрдпреЗ рдХрд╛ рднреБрдЧрддрд╛рди рдХрд┐рдпрд╛, рдпрд╣ рд╕рд╣реА рд╣реИред рдЕрдм рдмрддрд╛рдЗрдП рдХрд┐ рдЖрдкрдиреЗ рдпрд╣ рднреБрдЧрддрд╛рди рдХрд┐рд╕ рддрд░реАрдХреЗ рд╕реЗ рдХрд┐рдпрд╛ рдерд╛?', 'extracted_data': {'identity_confirmed': 'YES', 'speaker_name': None, 'speaker_relation': None, 'loan_taken': 'YES', 'last_month_payment': 'YES', 'payee': 'self', 'payee_name': None, 'payee_contact': None, 'payment_date': '30/01/2025', 'payment_mode': None, 'field_executive_name': None, 'field_executive_contact': None, 'payment_reason': None, 'payment_amount': '2000'}, 'next_action': 'continue', 'provide_summary': False, 'missing_info': ['payment_reason', 'payment_mode'], 'call_end_reason': 'null', 'conversation_notes': 'рдЧреНрд░рд╛рд╣рдХ рдиреЗ рдкрд┐рдЫрд▓реЗ рдорд╣реАрдиреЗ 30 рдЬрдирд╡рд░реА 2025 рдХреЛ 2000 рд░реБрдкрдпреЗ рдХрд╛ рднреБрдЧрддрд╛рди рд╕реНрд╡рдпрдВ рдХрд┐рдпрд╛, рддрд╛рд░реАрдЦ рдФрд░ рд░рд╛рд╢рд┐ рд╕реНрдкрд╖реНрдЯред', '_input_tokens': 2958, '_output_tokens': 859, '_total_tokens': 3817, '_latency_ms': 1670.38, '_model': 'openai/gpt-oss-20b:groq'}
2026-02-03 13:22:41,737 - services.conversational_flow - INFO - Extracted Data from LLM: {'identity_confirmed': 'YES', 'speaker_name': None, 'speaker_relation': None, 'loan_taken': 'YES', 'last_month_payment': 'YES', 'payee': 'self', 'payee_name': None, 'payee_contact': None, 'payment_date': '30/01/2025', 'payment_mode': None, 'field_executive_name': None, 'field_executive_contact': None, 'payment_reason': None, 'payment_amount': '2000'}
2026-02-03 13:22:41,737 - services.conversational_flow - INFO - Next Action from LLM: continue
2026-02-03 13:22:41,737 - services.conversational_flow - INFO - Call End Reason from LLM: null
2026-02-03 13:22:41,737 - services.conversational_flow - INFO - Session (after): {'session_id': 'session_e6d2ea0b_1770105126', 'customer_name': 'рдЖрдХрд╛рд╢', 'customer_name_english': 'AAKASH  .', 'identity_confirmed': 'YES', 'loan_taken': 'YES', 'last_month_payment': 'YES', 'payee': 'self', 'payment_date': '30/01/2025', 'payment_mode': None, 'payment_reason': None, 'payment_amount': '2000', 'conversation_started': True, 'last_bot_response': 'рдареАрдХ рд╣реИ, рдХреНрдпрд╛ рдЖрдкрдиреЗ рдкрд┐рдЫрд▓реЗ рдорд╣реАрдиреЗ рдХреЛрдИ рднреБрдЧрддрд╛рди рдХрд┐рдпрд╛ рд╣реИ?', 'identify_confirmation': None, 'availability': None, 'user_contact': None, 'last_month_emi_payment': None, 'payee_name': None, 'payee_contact': None, 'pay_date': None, 'mode_of_payment': None, 'field_executive_name': None, 'field_executive_contact': None, 'reason': None, 'amount': None, 'current_question': 0, 'retry_count': 0, 'call_should_end': False, 'call_end_reason': None, 'phase': 'conversation', 'generated_summary': None, 'summary_confirmed': False, 'product_type': 'рдкрд░реНрд╕рдирд▓ рд▓реЛрди', 'last_conversation_notes': 'рдЧреНрд░рд╛рд╣рдХ рдиреЗ рдЛрдг рд▓рд┐рдпрд╛ рд╣реИ рдХреА рдкреБрд╖реНрдЯрд┐ рдХреА'}
2026-02-03 13:22:41,737 - core.websocket_handler - INFO - ЁЯУд Answer result: CONTINUE_CONVERSATION
2026-02-03 13:22:41,737 - core.websocket_handler - INFO - ЁЯТм Continuing conversation .
2026-02-03 13:22:41,738 - core.websocket_handler - INFO - ЁЯЧгя╕П TTS playing: рдареАрдХ рд╣реИ, рдЖрдкрдиреЗ 30/01/2025 рдХреЛ 2000 рд░реБрдкрдпреЗ рдХрд╛ рднреБрдЧрддрд╛рди рдХрд┐...
2026-02-03 13:22:41,739 - services.tts_service - INFO - ЁЯО╡ TTS: рдареАрдХ рд╣реИ, рдЖрдкрдиреЗ 30/01/2025 рдХреЛ 2000 рд░реБрдкрдпреЗ рдХрд╛ рднреБрдЧрддрд╛рди рдХрд┐...
2026-02-03 13:22:41,746 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"tts_started"}...
2026-02-03 13:22:41,746 - core.router - INFO - ЁЯЪА Dispatching tts_started event to handler: handle_tts_started
2026-02-03 13:22:41,746 - core.websocket_handler - INFO - ЁЯФЗ Mic disabled for 5016739984 (TTS playing)
2026-02-03 13:22:41,746 - core.router - INFO - тЬЕ Handler handle_tts_started completed successfully
2026-02-03 13:22:52,534 - services.tts_service - INFO - тЬЕ TTS complete: 83 chunks
2026-02-03 13:22:52,535 - core.websocket_handler - INFO - тЬЕ TTS complete: 83 chunks sent
2026-02-03 13:22:52,535 - core.websocket_handler - INFO - тП░ Reset last_user_input_time after TTS for 5016739984
2026-02-03 13:22:52,535 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"tts_finished"}...
2026-02-03 13:22:52,535 - core.router - INFO - ЁЯЪА Dispatching tts_finished event to handler: handle_tts_finished
2026-02-03 13:22:52,535 - core.websocket_handler - INFO - ЁЯОд Mic enabled for 5016739984
2026-02-03 13:22:52,535 - core.router - INFO - тЬЕ Handler handle_tts_finished completed successfully
2026-02-03 13:22:53,753 - services.vad_silero - INFO - ЁЯОд Voice detected! (prob: 1.00)
2026-02-03 13:22:58,128 - services.vad_silero - INFO - ЁЯФЪ Speech ended, sending 155648 bytes to ASR
2026-02-03 13:22:58,129 - core.websocket_handler - INFO - ЁЯФН ASR: Processing audio for 5016739984
2026-02-03 13:22:59,673 - core.websocket_handler - INFO - ЁЯУЭ ASR Transcript: 'рдПрдХ рд▓рдбрдХрд╛ рдРрдпрд╛ рдерд╛ рд▓реЗрдиреЗ, рдореИрдВрдиреЗ рдЙрд╕рдХреА рд╣рд╛рдд рдореЗрдВ рдХреИрд╢ рджрд┐рдпрд╛ рдерд╛ред'
2026-02-03 13:22:59,673 - core.websocket_handler - INFO - тП░ Updated last_user_input_time for 5016739984
2026-02-03 13:22:59,673 - core.websocket_handler - INFO - ЁЯУе Processing answer: 'рдПрдХ рд▓рдбрдХрд╛ рдРрдпрд╛ рдерд╛ рд▓реЗрдиреЗ, рдореИрдВрдиреЗ рдЙрд╕рдХреА рд╣рд╛рдд рдореЗрдВ рдХреИрд╢ рджрд┐рдпрд╛ рдерд╛ред' for phase=conversation, question=0
2026-02-03 13:22:59,673 - flow.flow_manager - INFO - ЁЯФД Processing conversational response: 'рдПрдХ рд▓рдбрдХрд╛ рдРрдпрд╛ рдерд╛ рд▓реЗрдиреЗ, рдореИрдВрдиреЗ рдЙрд╕рдХреА рд╣рд╛рдд рдореЗрдВ рдХреИрд╢ рджрд┐рдпрд╛ рдерд╛ред'
2026-02-03 13:22:59,673 - services.conversational_flow - INFO - ===== New Conversational Turn =====
2026-02-03 13:22:59,673 - services.conversational_flow - INFO - Customer Name: рдЖрдХрд╛рд╢
2026-02-03 13:22:59,673 - services.conversational_flow - INFO - User Input: рдПрдХ рд▓рдбрдХрд╛ рдРрдпрд╛ рдерд╛ рд▓реЗрдиреЗ, рдореИрдВрдиреЗ рдЙрд╕рдХреА рд╣рд╛рдд рдореЗрдВ рдХреИрд╢ рджрд┐рдпрд╛ рдерд╛ред
2026-02-03 13:22:59,673 - services.conversational_flow - INFO - Session (before): {'session_id': 'session_e6d2ea0b_1770105126', 'customer_name': 'рдЖрдХрд╛рд╢', 'customer_name_english': 'AAKASH  .', 'identity_confirmed': 'YES', 'loan_taken': 'YES', 'last_month_payment': 'YES', 'payee': 'self', 'payment_date': '30/01/2025', 'payment_mode': None, 'payment_reason': None, 'payment_amount': '2000', 'conversation_started': True, 'last_bot_response': 'рдареАрдХ рд╣реИ, рдЖрдкрдиреЗ 30/01/2025 рдХреЛ 2000 рд░реБрдкрдпреЗ рдХрд╛ рднреБрдЧрддрд╛рди рдХрд┐рдпрд╛, рдпрд╣ рд╕рд╣реА рд╣реИред рдЕрдм рдмрддрд╛рдЗрдП рдХрд┐ рдЖрдкрдиреЗ рдпрд╣ рднреБрдЧрддрд╛рди рдХрд┐рд╕ рддрд░реАрдХреЗ рд╕реЗ рдХрд┐рдпрд╛ рдерд╛?', 'identify_confirmation': None, 'availability': None, 'user_contact': None, 'last_month_emi_payment': None, 'payee_name': None, 'payee_contact': None, 'pay_date': None, 'mode_of_payment': None, 'field_executive_name': None, 'field_executive_contact': None, 'reason': None, 'amount': None, 'current_question': 0, 'retry_count': 0, 'call_should_end': False, 'call_end_reason': None, 'phase': 'conversation', 'generated_summary': None, 'summary_confirmed': False, 'product_type': 'рдкрд░реНрд╕рдирд▓ рд▓реЛрди', 'last_conversation_notes': 'рдЧреНрд░рд╛рд╣рдХ рдиреЗ рдкрд┐рдЫрд▓реЗ рдорд╣реАрдиреЗ 30 рдЬрдирд╡рд░реА 2025 рдХреЛ 2000 рд░реБрдкрдпреЗ рдХрд╛ рднреБрдЧрддрд╛рди рд╕реНрд╡рдпрдВ рдХрд┐рдпрд╛, рддрд╛рд░реАрдЦ рдФрд░ рд░рд╛рд╢рд┐ рд╕реНрдкрд╖реНрдЯред'}
2026-02-03 13:22:59,674 - services.conversational_flow - INFO - Conversation Stage: mode_collection
2026-02-03 13:22:59,674 - services.conversational_flow - INFO - Missing Information: ['payment method', 'payment reason']
2026-02-03 13:23:01,564 - httpx - INFO - HTTP Request: POST https://router.huggingface.co/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-03 13:23:01,565 - llm.gemini_client - INFO - ЁЯдЦ [OpenAI HF] Response received
2026-02-03 13:23:01,565 - llm.gemini_client - INFO - тП▒я╕П [OpenAI HF] Latency: 1891.49 ms
2026-02-03 13:23:01,565 - llm.gemini_client - INFO - ЁЯОп [OpenAI HF usage] input_tokens=2975, output_tokens=785, total_tokens=3760
2026-02-03 13:23:01,565 - llm.gemini_client - INFO - тЬЕ [LangChain OpenAI] Response processed successfully - Latency: 1891.49ms, Tokens: 3760
2026-02-03 13:23:01,565 - services.conversational_flow - INFO - LLM Raw Response: {'bot_response': 'рдареАрдХ рд╣реИ, рдЖрдкрдиреЗ рдХреИрд╢ рджрд┐рдпрд╛ рдерд╛ред рдпрд╣ рдХрд┐рд╕ рдХрд╛рд░рдг рд╕реЗ рдерд╛, рдЬреИрд╕реЗ EMI, рд╢реБрд▓реНрдХ, рдпрд╛ рдХреЛрдИ рдЕрдиреНрдп рдХрд╛рд░рдг?', 'extracted_data': {'identity_confirmed': 'YES', 'speaker_name': None, 'speaker_relation': None, 'loan_taken': 'YES', 'last_month_payment': 'YES', 'payee': 'self', 'payee_name': None, 'payee_contact': None, 'payment_date': '30/01/2025', 'payment_mode': 'cash', 'field_executive_name': None, 'field_executive_contact': None, 'payment_reason': None, 'payment_amount': '2000'}, 'next_action': 'continue', 'provide_summary': False, 'missing_info': ['payment_reason'], 'call_end_reason': 'null', 'conversation_notes': 'рдЧреНрд░рд╛рд╣рдХ рдиреЗ рднреБрдЧрддрд╛рди рдХреЗ рддрд░реАрдХреЗ рдХреЗ рд░реВрдк рдореЗрдВ рдХреИрд╢ рджрд┐рдпрд╛ рдмрддрд╛рдпрд╛, рднреБрдЧрддрд╛рди рдХрд╛рд░рдг рдЕрднреА рдЕрд╕реНрдкрд╖реНрдЯ рд╣реИред', '_input_tokens': 2975, '_output_tokens': 785, '_total_tokens': 3760, '_latency_ms': 1891.49, '_model': 'openai/gpt-oss-20b:groq'}
2026-02-03 13:23:01,565 - services.conversational_flow - INFO - Extracted Data from LLM: {'identity_confirmed': 'YES', 'speaker_name': None, 'speaker_relation': None, 'loan_taken': 'YES', 'last_month_payment': 'YES', 'payee': 'self', 'payee_name': None, 'payee_contact': None, 'payment_date': '30/01/2025', 'payment_mode': 'cash', 'field_executive_name': None, 'field_executive_contact': None, 'payment_reason': None, 'payment_amount': '2000'}
2026-02-03 13:23:01,565 - services.conversational_flow - INFO - Next Action from LLM: continue
2026-02-03 13:23:01,565 - services.conversational_flow - INFO - Call End Reason from LLM: null
2026-02-03 13:23:01,566 - services.conversational_flow - INFO - Session (after): {'session_id': 'session_e6d2ea0b_1770105126', 'customer_name': 'рдЖрдХрд╛рд╢', 'customer_name_english': 'AAKASH  .', 'identity_confirmed': 'YES', 'loan_taken': 'YES', 'last_month_payment': 'YES', 'payee': 'self', 'payment_date': '30/01/2025', 'payment_mode': 'cash', 'payment_reason': None, 'payment_amount': '2000', 'conversation_started': True, 'last_bot_response': 'рдареАрдХ рд╣реИ, рдЖрдкрдиреЗ 30/01/2025 рдХреЛ 2000 рд░реБрдкрдпреЗ рдХрд╛ рднреБрдЧрддрд╛рди рдХрд┐рдпрд╛, рдпрд╣ рд╕рд╣реА рд╣реИред рдЕрдм рдмрддрд╛рдЗрдП рдХрд┐ рдЖрдкрдиреЗ рдпрд╣ рднреБрдЧрддрд╛рди рдХрд┐рд╕ рддрд░реАрдХреЗ рд╕реЗ рдХрд┐рдпрд╛ рдерд╛?', 'identify_confirmation': None, 'availability': None, 'user_contact': None, 'last_month_emi_payment': None, 'payee_name': None, 'payee_contact': None, 'pay_date': None, 'mode_of_payment': None, 'field_executive_name': None, 'field_executive_contact': None, 'reason': None, 'amount': None, 'current_question': 0, 'retry_count': 0, 'call_should_end': False, 'call_end_reason': None, 'phase': 'conversation', 'generated_summary': None, 'summary_confirmed': False, 'product_type': 'рдкрд░реНрд╕рдирд▓ рд▓реЛрди', 'last_conversation_notes': 'рдЧреНрд░рд╛рд╣рдХ рдиреЗ рдкрд┐рдЫрд▓реЗ рдорд╣реАрдиреЗ 30 рдЬрдирд╡рд░реА 2025 рдХреЛ 2000 рд░реБрдкрдпреЗ рдХрд╛ рднреБрдЧрддрд╛рди рд╕реНрд╡рдпрдВ рдХрд┐рдпрд╛, рддрд╛рд░реАрдЦ рдФрд░ рд░рд╛рд╢рд┐ рд╕реНрдкрд╖реНрдЯред'}
2026-02-03 13:23:01,566 - core.websocket_handler - INFO - ЁЯУд Answer result: CONTINUE_CONVERSATION
2026-02-03 13:23:01,566 - core.websocket_handler - INFO - ЁЯТм Continuing conversation .
2026-02-03 13:23:01,566 - core.websocket_handler - INFO - ЁЯЧгя╕П TTS playing: рдареАрдХ рд╣реИ, рдЖрдкрдиреЗ рдХреИрд╢ рджрд┐рдпрд╛ рдерд╛ред рдпрд╣ рдХрд┐рд╕ рдХрд╛рд░рдг рд╕реЗ рдерд╛, рдЬреИрд╕реЗ ...
2026-02-03 13:23:01,566 - services.tts_service - INFO - ЁЯО╡ TTS: рдареАрдХ рд╣реИ, рдЖрдкрдиреЗ рдХреИрд╢ рджрд┐рдпрд╛ рдерд╛ред рдпрд╣ рдХрд┐рд╕ рдХрд╛рд░рдг рд╕реЗ рдерд╛, рдЬреИрд╕реЗ ...
2026-02-03 13:23:01,572 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"tts_started"}...
2026-02-03 13:23:01,572 - core.router - INFO - ЁЯЪА Dispatching tts_started event to handler: handle_tts_started
2026-02-03 13:23:01,572 - core.websocket_handler - INFO - ЁЯФЗ Mic disabled for 5016739984 (TTS playing)
2026-02-03 13:23:01,572 - core.router - INFO - тЬЕ Handler handle_tts_started completed successfully
2026-02-03 13:23:07,959 - services.tts_service - INFO - тЬЕ TTS complete: 54 chunks
2026-02-03 13:23:07,960 - core.websocket_handler - INFO - тЬЕ TTS complete: 54 chunks sent
2026-02-03 13:23:07,961 - core.websocket_handler - INFO - тП░ Reset last_user_input_time after TTS for 5016739984
2026-02-03 13:23:07,962 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"tts_finished"}...
2026-02-03 13:23:07,962 - core.router - INFO - ЁЯЪА Dispatching tts_finished event to handler: handle_tts_finished
2026-02-03 13:23:07,962 - core.websocket_handler - INFO - ЁЯОд Mic enabled for 5016739984
2026-02-03 13:23:07,962 - core.router - INFO - тЬЕ Handler handle_tts_finished completed successfully
2026-02-03 13:23:09,314 - services.vad_silero - INFO - ЁЯОд Voice detected! (prob: 1.00)
2026-02-03 13:23:10,993 - services.vad_silero - INFO - ЁЯФЪ Speech ended, sending 69632 bytes to ASR
2026-02-03 13:23:10,993 - core.websocket_handler - INFO - ЁЯФН ASR: Processing audio for 5016739984
2026-02-03 13:23:11,940 - core.websocket_handler - INFO - ЁЯУЭ ASR Transcript: 'рдпрд╣ рдореИрдВ рдХреЗ рд▓реЗ рдерд╛ред'
2026-02-03 13:23:11,941 - core.websocket_handler - INFO - тП░ Updated last_user_input_time for 5016739984
2026-02-03 13:23:11,941 - core.websocket_handler - INFO - ЁЯУе Processing answer: 'рдпрд╣ рдореИрдВ рдХреЗ рд▓реЗ рдерд╛ред' for phase=conversation, question=0
2026-02-03 13:23:11,941 - flow.flow_manager - INFO - ЁЯФД Processing conversational response: 'рдпрд╣ рдореИрдВ рдХреЗ рд▓реЗ рдерд╛ред'
2026-02-03 13:23:11,941 - services.conversational_flow - INFO - ===== New Conversational Turn =====
2026-02-03 13:23:11,941 - services.conversational_flow - INFO - Customer Name: рдЖрдХрд╛рд╢
2026-02-03 13:23:11,941 - services.conversational_flow - INFO - User Input: рдпрд╣ рдореИрдВ рдХреЗ рд▓реЗ рдерд╛ред
2026-02-03 13:23:11,941 - services.conversational_flow - INFO - Session (before): {'session_id': 'session_e6d2ea0b_1770105126', 'customer_name': 'рдЖрдХрд╛рд╢', 'customer_name_english': 'AAKASH  .', 'identity_confirmed': 'YES', 'loan_taken': 'YES', 'last_month_payment': 'YES', 'payee': 'self', 'payment_date': '30/01/2025', 'payment_mode': 'cash', 'payment_reason': None, 'payment_amount': '2000', 'conversation_started': True, 'last_bot_response': 'рдареАрдХ рд╣реИ, рдЖрдкрдиреЗ рдХреИрд╢ рджрд┐рдпрд╛ рдерд╛ред рдпрд╣ рдХрд┐рд╕ рдХрд╛рд░рдг рд╕реЗ рдерд╛, рдЬреИрд╕реЗ EMI, рд╢реБрд▓реНрдХ, рдпрд╛ рдХреЛрдИ рдЕрдиреНрдп рдХрд╛рд░рдг?', 'identify_confirmation': None, 'availability': None, 'user_contact': None, 'last_month_emi_payment': None, 'payee_name': None, 'payee_contact': None, 'pay_date': None, 'mode_of_payment': None, 'field_executive_name': None, 'field_executive_contact': None, 'reason': None, 'amount': None, 'current_question': 0, 'retry_count': 0, 'call_should_end': False, 'call_end_reason': None, 'phase': 'conversation', 'generated_summary': None, 'summary_confirmed': False, 'product_type': 'рдкрд░реНрд╕рдирд▓ рд▓реЛрди', 'last_conversation_notes': 'рдЧреНрд░рд╛рд╣рдХ рдиреЗ рднреБрдЧрддрд╛рди рдХреЗ рддрд░реАрдХреЗ рдХреЗ рд░реВрдк рдореЗрдВ рдХреИрд╢ рджрд┐рдпрд╛ рдмрддрд╛рдпрд╛, рднреБрдЧрддрд╛рди рдХрд╛рд░рдг рдЕрднреА рдЕрд╕реНрдкрд╖реНрдЯ рд╣реИред'}
2026-02-03 13:23:11,942 - services.conversational_flow - INFO - Conversation Stage: reason_collection
2026-02-03 13:23:11,942 - services.conversational_flow - INFO - Missing Information: ['payment reason']
2026-02-03 13:23:13,681 - httpx - INFO - HTTP Request: POST https://router.huggingface.co/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-03 13:23:13,683 - llm.gemini_client - INFO - ЁЯдЦ [OpenAI HF] Response received
2026-02-03 13:23:13,683 - llm.gemini_client - INFO - тП▒я╕П [OpenAI HF] Latency: 1740.90 ms
2026-02-03 13:23:13,683 - llm.gemini_client - INFO - ЁЯОп [OpenAI HF usage] input_tokens=2947, output_tokens=1019, total_tokens=3966
2026-02-03 13:23:13,683 - llm.gemini_client - INFO - тЬЕ [LangChain OpenAI] Response processed successfully - Latency: 1740.90ms, Tokens: 3966
2026-02-03 13:23:13,683 - services.conversational_flow - INFO - LLM Raw Response: {'bot_response': 'рдХреНрдпрд╛ рдпрд╣ EMI рдХреЗ рд▓рд┐рдП рдерд╛?', 'extracted_data': {'identity_confirmed': 'YES', 'speaker_name': None, 'speaker_relation': None, 'loan_taken': 'YES', 'last_month_payment': 'YES', 'payee': 'self', 'payee_name': None, 'payee_contact': None, 'payment_date': '30/01/2025', 'payment_mode': 'cash', 'field_executive_name': None, 'field_executive_contact': None, 'payment_reason': None, 'payment_amount': '2000'}, 'next_action': 'continue', 'provide_summary': False, 'missing_info': ['payment_reason'], 'call_end_reason': 'null', 'conversation_notes': 'рдЧреНрд░рд╛рд╣рдХ рдиреЗ рдЕрд╕реНрдкрд╖реНрдЯ рдЙрддреНрддрд░ рджрд┐рдпрд╛, рднреБрдЧрддрд╛рди рдХрд╛рд░рдг рд╕реНрдкрд╖реНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдпреЗ рдкреВрдЫрддрд╛рдЫ рдЬрд╛рд░реА рд░рдЦреАред', '_input_tokens': 2947, '_output_tokens': 1019, '_total_tokens': 3966, '_latency_ms': 1740.9, '_model': 'openai/gpt-oss-20b:groq'}
2026-02-03 13:23:13,683 - services.conversational_flow - INFO - Extracted Data from LLM: {'identity_confirmed': 'YES', 'speaker_name': None, 'speaker_relation': None, 'loan_taken': 'YES', 'last_month_payment': 'YES', 'payee': 'self', 'payee_name': None, 'payee_contact': None, 'payment_date': '30/01/2025', 'payment_mode': 'cash', 'field_executive_name': None, 'field_executive_contact': None, 'payment_reason': None, 'payment_amount': '2000'}
2026-02-03 13:23:13,684 - services.conversational_flow - INFO - Next Action from LLM: continue
2026-02-03 13:23:13,684 - services.conversational_flow - INFO - Call End Reason from LLM: null
2026-02-03 13:23:13,684 - services.conversational_flow - INFO - Session (after): {'session_id': 'session_e6d2ea0b_1770105126', 'customer_name': 'рдЖрдХрд╛рд╢', 'customer_name_english': 'AAKASH  .', 'identity_confirmed': 'YES', 'loan_taken': 'YES', 'last_month_payment': 'YES', 'payee': 'self', 'payment_date': '30/01/2025', 'payment_mode': 'cash', 'payment_reason': None, 'payment_amount': '2000', 'conversation_started': True, 'last_bot_response': 'рдареАрдХ рд╣реИ, рдЖрдкрдиреЗ рдХреИрд╢ рджрд┐рдпрд╛ рдерд╛ред рдпрд╣ рдХрд┐рд╕ рдХрд╛рд░рдг рд╕реЗ рдерд╛, рдЬреИрд╕реЗ EMI, рд╢реБрд▓реНрдХ, рдпрд╛ рдХреЛрдИ рдЕрдиреНрдп рдХрд╛рд░рдг?', 'identify_confirmation': None, 'availability': None, 'user_contact': None, 'last_month_emi_payment': None, 'payee_name': None, 'payee_contact': None, 'pay_date': None, 'mode_of_payment': None, 'field_executive_name': None, 'field_executive_contact': None, 'reason': None, 'amount': None, 'current_question': 0, 'retry_count': 0, 'call_should_end': False, 'call_end_reason': None, 'phase': 'conversation', 'generated_summary': None, 'summary_confirmed': False, 'product_type': 'рдкрд░реНрд╕рдирд▓ рд▓реЛрди', 'last_conversation_notes': 'рдЧреНрд░рд╛рд╣рдХ рдиреЗ рднреБрдЧрддрд╛рди рдХреЗ рддрд░реАрдХреЗ рдХреЗ рд░реВрдк рдореЗрдВ рдХреИрд╢ рджрд┐рдпрд╛ рдмрддрд╛рдпрд╛, рднреБрдЧрддрд╛рди рдХрд╛рд░рдг рдЕрднреА рдЕрд╕реНрдкрд╖реНрдЯ рд╣реИред'}
2026-02-03 13:23:13,684 - core.websocket_handler - INFO - ЁЯУд Answer result: CONTINUE_CONVERSATION
2026-02-03 13:23:13,684 - core.websocket_handler - INFO - ЁЯТм Continuing conversation .
2026-02-03 13:23:13,685 - core.websocket_handler - INFO - ЁЯЧгя╕П TTS playing: рдХреНрдпрд╛ рдпрд╣ EMI рдХреЗ рд▓рд┐рдП рдерд╛?...
2026-02-03 13:23:13,685 - services.tts_service - INFO - ЁЯО╡ TTS: рдХреНрдпрд╛ рдпрд╣ EMI рдХреЗ рд▓рд┐рдП рдерд╛?...
2026-02-03 13:23:13,692 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"tts_started"}...
2026-02-03 13:23:13,692 - core.router - INFO - ЁЯЪА Dispatching tts_started event to handler: handle_tts_started
2026-02-03 13:23:13,692 - core.websocket_handler - INFO - ЁЯФЗ Mic disabled for 5016739984 (TTS playing)
2026-02-03 13:23:13,692 - core.router - INFO - тЬЕ Handler handle_tts_started completed successfully
2026-02-03 13:23:17,026 - services.tts_service - INFO - тЬЕ TTS complete: 34 chunks
2026-02-03 13:23:17,027 - core.websocket_handler - INFO - тЬЕ TTS complete: 34 chunks sent
2026-02-03 13:23:17,027 - core.websocket_handler - INFO - тП░ Reset last_user_input_time after TTS for 5016739984
2026-02-03 13:23:17,028 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"tts_finished"}...
2026-02-03 13:23:17,028 - core.router - INFO - ЁЯЪА Dispatching tts_finished event to handler: handle_tts_finished
2026-02-03 13:23:17,028 - core.websocket_handler - INFO - ЁЯОд Mic enabled for 5016739984
2026-02-03 13:23:17,029 - core.router - INFO - тЬЕ Handler handle_tts_finished completed successfully
2026-02-03 13:23:17,330 - services.vad_silero - INFO - ЁЯОд Voice detected! (prob: 1.00)
2026-02-03 13:23:19,673 - services.vad_silero - INFO - ЁЯФЪ Speech ended, sending 84992 bytes to ASR
2026-02-03 13:23:19,673 - core.websocket_handler - INFO - ЁЯФН ASR: Processing audio for 5016739984
2026-02-03 13:23:20,442 - core.websocket_handler - INFO - ЁЯУЭ ASR Transcript: 'рд╣рд╛ рдЬреА рдХрд░реЗрдЯред'
2026-02-03 13:23:20,442 - core.websocket_handler - INFO - тП░ Updated last_user_input_time for 5016739984
2026-02-03 13:23:20,442 - core.websocket_handler - INFO - ЁЯУе Processing answer: 'рд╣рд╛ рдЬреА рдХрд░реЗрдЯред' for phase=conversation, question=0
2026-02-03 13:23:20,442 - flow.flow_manager - INFO - ЁЯФД Processing conversational response: 'рд╣рд╛ рдЬреА рдХрд░реЗрдЯред'
2026-02-03 13:23:20,443 - services.conversational_flow - INFO - ===== New Conversational Turn =====
2026-02-03 13:23:20,443 - services.conversational_flow - INFO - Customer Name: рдЖрдХрд╛рд╢
2026-02-03 13:23:20,443 - services.conversational_flow - INFO - User Input: рд╣рд╛ рдЬреА рдХрд░реЗрдЯред
2026-02-03 13:23:20,443 - services.conversational_flow - INFO - Session (before): {'session_id': 'session_e6d2ea0b_1770105126', 'customer_name': 'рдЖрдХрд╛рд╢', 'customer_name_english': 'AAKASH  .', 'identity_confirmed': 'YES', 'loan_taken': 'YES', 'last_month_payment': 'YES', 'payee': 'self', 'payment_date': '30/01/2025', 'payment_mode': 'cash', 'payment_reason': None, 'payment_amount': '2000', 'conversation_started': True, 'last_bot_response': 'рдХреНрдпрд╛ рдпрд╣ EMI рдХреЗ рд▓рд┐рдП рдерд╛?', 'identify_confirmation': None, 'availability': None, 'user_contact': None, 'last_month_emi_payment': None, 'payee_name': None, 'payee_contact': None, 'pay_date': None, 'mode_of_payment': None, 'field_executive_name': None, 'field_executive_contact': None, 'reason': None, 'amount': None, 'current_question': 0, 'retry_count': 0, 'call_should_end': False, 'call_end_reason': None, 'phase': 'conversation', 'generated_summary': None, 'summary_confirmed': False, 'product_type': 'рдкрд░реНрд╕рдирд▓ рд▓реЛрди', 'last_conversation_notes': 'рдЧреНрд░рд╛рд╣рдХ рдиреЗ рдЕрд╕реНрдкрд╖реНрдЯ рдЙрддреНрддрд░ рджрд┐рдпрд╛, рднреБрдЧрддрд╛рди рдХрд╛рд░рдг рд╕реНрдкрд╖реНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдпреЗ рдкреВрдЫрддрд╛рдЫ рдЬрд╛рд░реА рд░рдЦреАред'}
2026-02-03 13:23:20,443 - services.conversational_flow - INFO - Conversation Stage: reason_collection
2026-02-03 13:23:20,443 - services.conversational_flow - INFO - Missing Information: ['payment reason']
2026-02-03 13:23:21,596 - httpx - INFO - HTTP Request: POST https://router.huggingface.co/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-03 13:23:21,607 - llm.gemini_client - INFO - ЁЯдЦ [OpenAI HF] Response received
2026-02-03 13:23:21,607 - llm.gemini_client - INFO - тП▒я╕П [OpenAI HF] Latency: 1162.95 ms
2026-02-03 13:23:21,607 - llm.gemini_client - INFO - ЁЯОп [OpenAI HF usage] input_tokens=2928, output_tokens=489, total_tokens=3417
2026-02-03 13:23:21,607 - llm.gemini_client - INFO - тЬЕ [LangChain OpenAI] Response processed successfully - Latency: 1162.95ms, Tokens: 3417
2026-02-03 13:23:21,607 - services.conversational_flow - INFO - LLM Raw Response: {'bot_response': 'рдареАрдХ рд╣реИ, рдЖрдкрдХрд╛ рднреБрдЧрддрд╛рди 30/01/2025 рдХреЛ рдирдХрдж рдореЗрдВ 2000 рд░реБрдкрдпреЗ рдХрд╛ рдерд╛, рдФрд░ рдпрд╣ EMI рдХреЗ рд▓рд┐рдП рдерд╛ред рдХреНрдпрд╛ рдпрд╣ рдЬрд╛рдирдХрд╛рд░реА рд╕рд╣реА рд╣реИ?', 'extracted_data': {'identity_confirmed': 'YES', 'speaker_name': None, 'speaker_relation': None, 'loan_taken': 'YES', 'last_month_payment': 'YES', 'payee': 'self', 'payee_name': None, 'payee_contact': None, 'payment_date': '30/01/2025', 'payment_mode': 'cash', 'field_executive_name': None, 'field_executive_contact': None, 'payment_reason': 'emi', 'payment_amount': '2000'}, 'next_action': 'continue', 'provide_summary': True, 'missing_info': [], 'call_end_reason': 'null', 'conversation_notes': 'рдЧреНрд░рд╛рд╣рдХ рдиреЗ рдкреБрд╖реНрдЯрд┐ рдХреА рдХрд┐ рднреБрдЧрддрд╛рди EMI рдХреЗ рд▓рд┐рдП рдерд╛, рднреБрдЧрддрд╛рди рд╡рд┐рд╡рд░рдг рдЕрдкрдбреЗрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛', '_input_tokens': 2928, '_output_tokens': 489, '_total_tokens': 3417, '_latency_ms': 1162.95, '_model': 'openai/gpt-oss-20b:groq'}
2026-02-03 13:23:21,607 - services.conversational_flow - INFO - Extracted Data from LLM: {'identity_confirmed': 'YES', 'speaker_name': None, 'speaker_relation': None, 'loan_taken': 'YES', 'last_month_payment': 'YES', 'payee': 'self', 'payee_name': None, 'payee_contact': None, 'payment_date': '30/01/2025', 'payment_mode': 'cash', 'field_executive_name': None, 'field_executive_contact': None, 'payment_reason': 'emi', 'payment_amount': '2000'}
2026-02-03 13:23:21,608 - services.conversational_flow - INFO - Next Action from LLM: continue
2026-02-03 13:23:21,608 - services.conversational_flow - INFO - Call End Reason from LLM: null
2026-02-03 13:23:21,608 - services.conversational_flow - INFO - Session (after): {'session_id': 'session_e6d2ea0b_1770105126', 'customer_name': 'рдЖрдХрд╛рд╢', 'customer_name_english': 'AAKASH  .', 'identity_confirmed': 'YES', 'loan_taken': 'YES', 'last_month_payment': 'YES', 'payee': 'self', 'payment_date': '30/01/2025', 'payment_mode': 'cash', 'payment_reason': 'emi', 'payment_amount': '2000', 'conversation_started': True, 'last_bot_response': 'рдХреНрдпрд╛ рдпрд╣ EMI рдХреЗ рд▓рд┐рдП рдерд╛?', 'identify_confirmation': None, 'availability': None, 'user_contact': None, 'last_month_emi_payment': None, 'payee_name': None, 'payee_contact': None, 'pay_date': None, 'mode_of_payment': None, 'field_executive_name': None, 'field_executive_contact': None, 'reason': None, 'amount': None, 'current_question': 0, 'retry_count': 0, 'call_should_end': False, 'call_end_reason': None, 'phase': 'conversation', 'generated_summary': None, 'summary_confirmed': False, 'product_type': 'рдкрд░реНрд╕рдирд▓ рд▓реЛрди', 'last_conversation_notes': 'рдЧреНрд░рд╛рд╣рдХ рдиреЗ рдЕрд╕реНрдкрд╖реНрдЯ рдЙрддреНрддрд░ рджрд┐рдпрд╛, рднреБрдЧрддрд╛рди рдХрд╛рд░рдг рд╕реНрдкрд╖реНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдпреЗ рдкреВрдЫрддрд╛рдЫ рдЬрд╛рд░реА рд░рдЦреАред'}
2026-02-03 13:23:21,608 - services.conversational_flow - INFO - ЁЯУЭ Summary provided in bot_response
2026-02-03 13:23:21,608 - flow.flow_manager - INFO - ЁЯУЭ Summary provided in conversational response
2026-02-03 13:23:21,608 - services.summary_service - INFO - ================================================================================
2026-02-03 13:23:21,608 - services.summary_service - INFO - ЁЯдЦ LLM CALL (detect_confirmation) - Input:
2026-02-03 13:23:21,608 - services.summary_service - INFO - User response: рд╣рд╛ рдЬреА рдХрд░реЗрдЯред
2026-02-03 13:23:21,608 - services.summary_service - INFO - --------------------------------------------------------------------------------
2026-02-03 13:23:22,027 - httpx - INFO - HTTP Request: POST https://router.huggingface.co/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-03 13:23:22,029 - llm.gemini_client - INFO - ЁЯдЦ [OpenAI HF] Response received
2026-02-03 13:23:22,029 - llm.gemini_client - INFO - тП▒я╕П [OpenAI HF] Latency: 420.76 ms
2026-02-03 13:23:22,029 - llm.gemini_client - INFO - ЁЯОп [OpenAI HF usage] input_tokens=310, output_tokens=90, total_tokens=400
2026-02-03 13:23:22,029 - llm.gemini_client - INFO - тЬЕ [LangChain OpenAI] Response processed successfully - Latency: 420.76ms, Tokens: 400
2026-02-03 13:23:22,029 - services.summary_service - INFO - ЁЯУе LLM CALL (detect_confirmation) - Response:
2026-02-03 13:23:22,030 - services.summary_service - INFO - Confirmation: YES
2026-02-03 13:23:22,030 - services.summary_service - INFO - --------------------------------------------------------------------------------
2026-02-03 13:23:22,030 - services.summary_service - INFO - тЬЕ LLM CALL (detect_confirmation) - Result: YES
2026-02-03 13:23:22,030 - services.summary_service - INFO - ================================================================================
2026-02-03 13:23:22,030 - flow.flow_manager - INFO - тЬЕ User confirmed summary - moving to closing
2026-02-03 13:23:22,030 - core.websocket_handler - INFO - ЁЯУд Answer result: CLOSING
2026-02-03 13:23:22,030 - core.websocket_handler - INFO - ЁЯСЛ Saying closing statement...
2026-02-03 13:23:22,031 - utils.session_data_storage - INFO - ЁЯТ╛ Saved session data for session: session_e6d2ea0b_1770105126 (fields: 19)
2026-02-03 13:23:22,032 - core.websocket_handler - INFO - ЁЯЧгя╕П TTS playing: рдЖрдкрдХреЗ рдореВрд▓реНрдпрд╡рд╛рди рдлрд╝реАрдбрдмреИрдХ рдФрд░ рд╕рдордп рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рджред
...
2026-02-03 13:23:22,032 - services.tts_service - INFO - ЁЯО╡ TTS: рдЖрдкрдХреЗ рдореВрд▓реНрдпрд╡рд╛рди рдлрд╝реАрдбрдмреИрдХ рдФрд░ рд╕рдордп рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рджред
...
2026-02-03 13:23:22,039 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"tts_started"}...
2026-02-03 13:23:22,040 - core.router - INFO - ЁЯЪА Dispatching tts_started event to handler: handle_tts_started
2026-02-03 13:23:22,040 - core.websocket_handler - INFO - ЁЯФЗ Mic disabled for 5016739984 (TTS playing)
2026-02-03 13:23:22,040 - core.router - INFO - тЬЕ Handler handle_tts_started completed successfully
2026-02-03 13:23:27,738 - services.tts_service - INFO - тЬЕ TTS complete: 50 chunks
2026-02-03 13:23:27,739 - core.websocket_handler - INFO - тЬЕ TTS complete: 50 chunks sent
2026-02-03 13:23:27,740 - core.websocket_handler - INFO - тП░ Reset last_user_input_time after TTS for 5016739984
2026-02-03 13:23:27,741 - core.websocket_handler - INFO - ЁЯУЭ Text message: {"type":"tts_finished"}...
2026-02-03 13:23:27,741 - core.router - INFO - ЁЯЪА Dispatching tts_finished event to handler: handle_tts_finished
2026-02-03 13:23:27,741 - core.websocket_handler - INFO - тЬЕ Survey completed, call ended
2026-02-03 13:23:27,741 - core.router - INFO - тЬЕ Handler handle_tts_finished completed successfully
2026-02-03 13:37:03,332 - core.websocket_handler - ERROR - Error in WebSocket loop: Cannot call "receive" once a disconnect message has been received.
